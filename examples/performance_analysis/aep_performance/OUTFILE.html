<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<style>
.r1 {color: #000080}
.r2 {font-weight: bold}
.r3 {color: #000000; background-color: #f8f8f8}
.r4 {color: #008000; background-color: #f8f8f8; font-weight: bold}
.r5 {color: #0000ff; background-color: #f8f8f8}
.r6 {background-color: #f8f8f8}
.r7 {color: #666666; background-color: #f8f8f8}
.r8 {color: #408080; background-color: #f8f8f8; font-style: italic}
.r9 {color: #008000; background-color: #f8f8f8}
.r10 {color: #aa22ff; background-color: #f8f8f8}
.r11 {font-style: italic}
.r12 {color: #aa22ff; background-color: #f8f8f8; font-weight: bold}
.r13 {color: #ba2121; background-color: #f8f8f8}
.r14 {color: #d2413a; background-color: #f8f8f8; font-weight: bold}
.r15 {color: #0000ff}
body {
    color: #000000;
    background-color: #ffffff;
}
</style>
</head>
<html>
<body>
    <code>
        <pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">                                         Memory usage: <span class="r1">█████████████████</span> (max: 1850.93MB)                                         
/Users/rhammond/Documents/GitHub/floris/floris/simulation/wake_velocity/gaussianModels/gaussian_model_base.py: % of time =  35.99%
                                                         out of 401.61s.                                                          
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/Users/rhammond/Documents/GitHub/floris/floris/simulation/w… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
    41 │       │       │     │       │  -13 │▁▁▁▁▁▁▁       │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">yaw_added_turbulence_mixing</span><span class="r3">(</span><span class="r6">                       </span>   
   ... │       │       │     │       │      │              │       │                                                              
    62 │       │       │     │   68% │ -462 │▁▁▁▁▁▁        │       │<span class="r3">                coord, turbine, flow_field, x_locations, y…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    66 │       │       │     │       │   64 │▁▁▁▁▁▁        │       │<span class="r3">            v_prime </span><span class="r7">=</span><span class="r3"> flow_field</span><span class="r7">.</span><span class="r3">v </span><span class="r7">+</span><span class="r3"> V</span><span class="r6">                     </span>   
    67 │       │       │     │       │   74 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            w_prime </span><span class="r7">=</span><span class="r3"> flow_field</span><span class="r7">.</span><span class="r3">w </span><span class="r7">+</span><span class="r3"> W</span><span class="r6">                     </span>   
   ... │       │       │     │       │      │              │       │                                                              
    74 │       │       │     │       │   57 │▁▁▁▁▁         │       │<span class="r3">                (np</span><span class="r7">.</span><span class="r3">abs(x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">&lt;</span><span class="r3"> turbine</span><span class="r7">.</span><span class="r3">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    77 │       │       │     │       │   13 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">                u_prime </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">mean(v_prime[idx]) </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    84 │       │       │     │       │    7 │▁▁▁▁▁▁▁       │       │<span class="r3">            TI_mixing </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">array(TI_total) </span><span class="r7">-</span><span class="r3"> turbine</span><span class="r7">.</span><span class="r3">curre…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    90 │       │       │     │       │    8 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">calculate_VW</span><span class="r3">(</span><span class="r6">                                      </span>   
   ... │       │       │     │       │      │              │       │                                                              
   137 │       │       │     │       │ -493 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">                coord, turbine, flow_field, x_locations, y…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   181 │       │       │     │       │   -2 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">calc_VW</span><span class="r3">(</span><span class="r6">                                           </span>   
   ... │       │       │     │       │      │              │       │                                                              
   220 │       │       │     │       │    1 │▁▁▁           │       │<span class="r3">        ) </span><span class="r7">/</span><span class="r3"> Uinf</span><span class="r6">                                           </span>   
   ... │       │       │     │       │      │              │       │                                                              
   223 │       │       │     │       │    3 │▁▁▁           │       │<span class="r3">            </span><span class="r7">*</span><span class="r3"> ((HH </span><span class="r7">-</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2</span><span class="r3">) </span><span class="r7">/</span><span class="r3"> flow_field</span><span class="r7">.</span><span class="r3">specified_wind_he…</span>   
   224 │       │       │     │       │   -3 │▁▁▁▁▁▁▁       │       │<span class="r3">        ) </span><span class="r7">/</span><span class="r3"> Uinf</span><span class="r6">                                           </span>   
   ... │       │       │     │       │      │              │       │                                                              
   226 │       │       │     │       │    0 │▁▁▁▁▁▁▁       │       │<span class="r3">            scale </span><span class="r7">*</span><span class="r3"> (np</span><span class="r7">.</span><span class="r3">pi </span><span class="r7">/</span><span class="r3"> </span><span class="r7">8</span><span class="r3">) </span><span class="r7">*</span><span class="r3"> D </span><span class="r7">*</span><span class="r3"> vel_top </span><span class="r7">*</span><span class="r3"> Uinf </span><span class="r7">*</span><span class="r3"> Ct </span><span class="r7">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   229 │       │       │     │       │   -5 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            </span><span class="r7">-</span><span class="r3">scale </span><span class="r7">*</span><span class="r3"> (np</span><span class="r7">.</span><span class="r3">pi </span><span class="r7">/</span><span class="r3"> </span><span class="r7">8</span><span class="r3">) </span><span class="r7">*</span><span class="r3"> D </span><span class="r7">*</span><span class="r3"> vel_bottom </span><span class="r7">*</span><span class="r3"> Uinf </span><span class="r7">*</span><span class="r3">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   241 │    1% │       │  0% │       │  136 │▁▁▁▁▁▁        │       │<span class="r3">        lm </span><span class="r7">=</span><span class="r3"> kappa </span><span class="r7">*</span><span class="r3"> z_locations </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">1</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> kappa </span><span class="r7">*</span><span class="r3"> z_location…</span>   
   242 │       │       │     │   69% │   -4 │▁▁▁▁▁▁        │       │<span class="r3">        z </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">linspace(</span><span class="r6">                                   </span>   
   243 │       │       │     │   70% │  -20 │▁▁▁▁▁▁        │       │<span class="r3">            z_locations</span><span class="r7">.</span><span class="r3">min(), z_locations</span><span class="r7">.</span><span class="r3">max(), flow_fie…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   245 │       │       │     │       │  -64 │▁▁▁▁          │       │<span class="r3">        dudz_initial </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">gradient(flow_field</span><span class="r7">.</span><span class="r3">u_initial, z…</span>   
   246 │       │       │     │       │  145 │▁▁▁▁▁▁▁       │       │<span class="r3">        nu </span><span class="r7">=</span><span class="r3"> lm </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">abs(dudz_initial[</span><span class="r7">0</span><span class="r3">, :, :])</span><span class="r6">       </span>   
   ... │       │       │     │       │      │              │       │                                                              
   249 │       │       │  0% │       │  158 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        yLocs </span><span class="r7">=</span><span class="r3"> y_locations </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (coord</span><span class="r7">.</span><span class="r3">x2)</span><span class="r6">            </span>   
   250 │       │       │     │       │  184 │▁▁▁▁▁▁        │       │<span class="r3">        zT </span><span class="r7">=</span><span class="r3"> z_locations </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (HH </span><span class="r7">+</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)</span><span class="r6">             </span>   
   251 │       │       │     │       │  175 │▁▁▁▁▁         │       │<span class="r3">        rT </span><span class="r7">=</span><span class="r3"> yLocs </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> zT </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">                          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   257 │    3% │       │  1% │       │  174 │▁▁▁▁▁▁        │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> nu </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">/</span><span class="r3"> Uinf </span><span class="r7">+</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   265 │    3% │       │  1% │       │  166 │▁▁▁▁▁▁        │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> nu </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">/</span><span class="r3"> Uinf </span><span class="r7">+</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   269 │       │       │     │       │  134 │▁▁▁▁          │       │<span class="r3">        zB </span><span class="r7">=</span><span class="r3"> z_locations </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (HH </span><span class="r7">-</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)</span><span class="r6">             </span>   
   270 │       │       │     │       │  170 │▁▁▁▁          │       │<span class="r3">        rB </span><span class="r7">=</span><span class="r3"> yLocs </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> zB </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">                          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   276 │    2% │       │  1% │       │  154 │▁▁▁▁▁▁        │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> nu </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">/</span><span class="r3"> Uinf </span><span class="r7">+</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   283 │    3% │       │  1% │       │  218 │▁▁▁▁          │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> nu </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">/</span><span class="r3"> Uinf </span><span class="r7">+</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   287 │       │       │     │       │  168 │▁▁▁▁▁▁        │       │<span class="r3">        yLocs </span><span class="r7">=</span><span class="r3"> y_locations </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (coord</span><span class="r7">.</span><span class="r3">x2)</span><span class="r6">            </span>   
   288 │       │       │     │       │   19 │▁▁▁▁▁▁▁       │       │<span class="r3">        zLocs </span><span class="r7">=</span><span class="r3"> z_locations </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> (HH </span><span class="r7">+</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)</span><span class="r6">          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   296 │    3% │       │  2% │       │   73 │▁▁▁▁▁▁▁       │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> nu </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">/</span><span class="r3"> Uinf </span><span class="r7">+</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   303 │    4% │       │  2% │       │  205 │▁▁▁▁▁         │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> nu </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">/</span><span class="r3"> Uinf </span><span class="r7">+</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   307 │       │       │     │       │  140 │▁▁▁▁          │       │<span class="r3">        yLocs </span><span class="r7">=</span><span class="r3"> y_locations </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (coord</span><span class="r7">.</span><span class="r3">x2)</span><span class="r6">            </span>   
   308 │       │       │     │       │    9 │▁▁▁▁▁         │       │<span class="r3">        zLocs </span><span class="r7">=</span><span class="r3"> z_locations </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> (HH </span><span class="r7">-</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)</span><span class="r6">          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   316 │    4% │       │  2% │       │  113 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> nu </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">/</span><span class="r3"> Uinf </span><span class="r7">+</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   323 │    3% │       │  2% │       │   14 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> nu </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">/</span><span class="r3"> Uinf </span><span class="r7">+</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   369 │       │       │     │       │  157 │▁▁▁▁▁▁▁       │       │<span class="r3">        V </span><span class="r7">=</span><span class="r3"> V1 </span><span class="r7">+</span><span class="r3"> V2 </span><span class="r7">+</span><span class="r3"> V3 </span><span class="r7">+</span><span class="r3"> V4  </span><span class="r8"># + V5 + V6</span><span class="r6">                 </span>   
   370 │       │       │     │       │  119 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        W </span><span class="r7">=</span><span class="r3"> W1 </span><span class="r7">+</span><span class="r3"> W2 </span><span class="r7">+</span><span class="r3"> W3 </span><span class="r7">+</span><span class="r3"> W4  </span><span class="r8"># + W5 + W6</span><span class="r6">                 </span>   
   ... │       │       │     │       │      │              │       │                                                              
   373 │       │       │     │       │   -5 │▁▁▁▁▁         │       │<span class="r3">        V[x_locations </span><span class="r7">&lt;</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0.0</span><span class="r6">                    </span>   
   374 │       │       │     │       │    1 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        W[x_locations </span><span class="r7">&lt;</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0.0</span><span class="r6">                    </span>   
   375 │       │       │     │       │   -4 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        W[W </span><span class="r7">&lt;</span><span class="r3"> </span><span class="r7">0</span><span class="r3">] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0</span><span class="r6">                                       </span>   
   ... │       │       │     │       │      │              │       │                                                              
   396 │       │       │     │  100% │    1 │▁             │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">_calculate_VW_velocities</span><span class="r6">               </span>   
   ... │       │       │     │       │      │              │       │                                                              
   487 │       │       │     │       │   68 │▁▁▁▁          │       │<span class="r3">        yR </span><span class="r7">=</span><span class="r3"> y_locations </span><span class="r7">-</span><span class="r3"> turbine_coord</span><span class="r7">.</span><span class="r3">x2</span><span class="r6">                </span>   
   488 │       │       │     │       │   81 │▁▁▁▁▁▁▁       │       │<span class="r3">        xR </span><span class="r7">=</span><span class="r3"> yR </span><span class="r7">*</span><span class="r3"> tand(yaw) </span><span class="r7">+</span><span class="r3"> turbine_coord</span><span class="r7">.</span><span class="r3">x1</span><span class="r6">             </span>   
   ... │       │       │     │       │      │              │       │                                                              
   510 │       │       │     │       │  117 │▁▁▁▁▁         │       │<span class="r3">        uR </span><span class="r7">=</span><span class="r3"> U_local </span><span class="r7">*</span><span class="r3"> Ct </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">2.0</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> Ct)))</span><span class="r6">  </span>   
   511 │       │       │     │       │   96 │▁▁▁▁          │       │<span class="r3">        u0 </span><span class="r7">=</span><span class="r3"> U_local </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> Ct)</span><span class="r6">                     </span>   
   ... │       │       │     │       │      │              │       │                                                              
   538 │       │       │     │       │  150 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        sigma_z0 </span><span class="r7">=</span><span class="r3"> turbine</span><span class="r7">.</span><span class="r3">rotor_diameter </span><span class="r7">*</span><span class="r3"> </span><span class="r7">0.5</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(…</span>   
   539 │       │       │     │       │   89 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        sigma_y0 </span><span class="r7">=</span><span class="r3"> sigma_z0 </span><span class="r7">*</span><span class="r3"> cosd(yaw) </span><span class="r7">*</span><span class="r3"> cosd(veer)</span><span class="r6">       </span>   
   540 │       │       │     │  100% │    2 │▁▁            │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> sigma_y0, sigma_z0</span><span class="r6">                          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   542 │       │       │     │       │    1 │▁             │       │<span class="r3">    </span><span class="r10">@staticmethod</span><span class="r6">                                          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   560 │    1% │       │  0% │       │  207 │▁▁▁▁▁         │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> U </span><span class="r7">*</span><span class="r3"> C </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">exp(</span><span class="r7">-1</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> r </span><span class="r7">**</span><span class="r3"> n </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma </span><span class="r7">**</span><span class="r3"> </span><span class="r7">…</span>   
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11"> /Users/rhammond/Documents/GitHub/floris/floris/simulation/wake_deflection/base_velocity_deflection.py: % of time =  14.70% out of </span>
<span class="r11">                                                             401.61s.                                                              </span>
       ╷       ╷        ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time %  </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native  </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/Users/rhammond/Documents/GitHub/floris/floris/simulation/w… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │        │     │       │      │              │       │                                                              
    86 │       │        │     │       │    6 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">calculate_effective_yaw_angle</span><span class="r3">(</span><span class="r6">                     </span>   
   ... │       │        │     │       │      │              │       │                                                              
   138 │       │        │     │       │  -33 │▁▁▁▁▁▁▁       │       │<span class="r3">                (np</span><span class="r7">.</span><span class="r3">abs(x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1) </span><span class="r7">&lt;</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">4</span><span class="r3">)</span><span class="r6">   </span>   
   139 │       │        │     │       │  -31 │▁▁▁▁▁▁▁       │       │<span class="r3">                </span><span class="r7">&amp;</span><span class="r3"> (np</span><span class="r7">.</span><span class="r3">abs(y_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x2) </span><span class="r7">&lt;</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)</span><span class="r6"> </span>   
   ... │       │        │     │       │      │              │       │                                                              
   142 │       │        │     │       │    1 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            yLocs </span><span class="r7">=</span><span class="r3"> y_locations[idx] </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x2</span><span class="r6">     </span>   
   ... │       │        │     │       │      │              │       │                                                              
   145 │       │        │     │       │   15 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            zT </span><span class="r7">=</span><span class="r3"> z_locations[idx] </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (HH </span><span class="r7">+</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)</span><span class="r6">    </span>   
   146 │       │        │     │       │   16 │▁▁▁▁▁▁        │       │<span class="r3">            rT </span><span class="r7">=</span><span class="r3"> yLocs </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> zT </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">                      </span>   
   ... │       │        │     │       │      │              │       │                                                              
   149 │       │        │     │       │   -3 │▁▁▁▁▁▁▁       │       │<span class="r3">            zB </span><span class="r7">=</span><span class="r3"> z_locations[idx] </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (HH </span><span class="r7">-</span><span class="r3"> D </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)</span><span class="r6">    </span>   
   150 │       │        │     │       │   26 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            rB </span><span class="r7">=</span><span class="r3"> yLocs </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> zB </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">                      </span>   
   ... │       │        │     │       │      │              │       │                                                              
   153 │       │        │     │       │  -16 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            zC </span><span class="r7">=</span><span class="r3"> z_locations[idx] </span><span class="r7">+</span><span class="r3"> </span><span class="r7">0.01</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (HH)</span><span class="r6">            </span>   
   154 │       │        │     │       │   24 │▁▁▁▁          │       │<span class="r3">            rC </span><span class="r7">=</span><span class="r3"> yLocs </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> zC </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">                      </span>   
   ... │       │        │     │       │      │              │       │                                                              
   158 │       │        │     │       │  -11 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            avg_V </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">mean(V[idx])</span><span class="r6">                        </span>   
   ... │       │        │     │       │      │              │       │                                                              
   166 │       │        │     │       │    3 │▁▁▁           │       │<span class="r3">                </span><span class="r7">**</span><span class="r3"> flow_field</span><span class="r7">.</span><span class="r3">wind_shear</span><span class="r6">                   </span>   
   ... │       │        │     │       │      │              │       │                                                              
   171 │       │        │     │   53% │    2 │▁▁            │       │<span class="r3">                </span><span class="r7">**</span><span class="r3"> flow_field</span><span class="r7">.</span><span class="r3">wind_shear</span><span class="r6">                   </span>   
   ... │       │        │     │       │      │              │       │                                                              
   173 │       │        │     │       │    4 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            Gamma_top </span><span class="r7">=</span><span class="r3"> (np</span><span class="r7">.</span><span class="r3">pi </span><span class="r7">/</span><span class="r3"> </span><span class="r7">8</span><span class="r3">) </span><span class="r7">*</span><span class="r3"> D </span><span class="r7">*</span><span class="r3"> vel_top </span><span class="r7">*</span><span class="r3"> Uinf </span><span class="r7">*</span><span class="r3">…</span>   
   ... │       │        │     │       │      │              │       │                                                              
   175 │       │        │     │       │   -6 │▁▁▁▁          │       │<span class="r3">                </span><span class="r7">-</span><span class="r3">(np</span><span class="r7">.</span><span class="r3">pi </span><span class="r7">/</span><span class="r3"> </span><span class="r7">8</span><span class="r3">) </span><span class="r7">*</span><span class="r3"> D </span><span class="r7">*</span><span class="r3"> vel_bottom </span><span class="r7">*</span><span class="r3"> Uinf </span><span class="r7">*</span><span class="r3"> Ct </span><span class="r7">…</span>   
   ... │       │        │     │       │      │              │       │                                                              
   178 │       │        │     │       │    2 │▁▁▁▁          │       │<span class="r3">                </span><span class="r7">0.25</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">pi </span><span class="r7">*</span><span class="r3"> D </span><span class="r7">*</span><span class="r3"> (aI </span><span class="r7">-</span><span class="r3"> aI </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">) </span><span class="r7">*</span><span class="r3"> tu…</span>   
   ... │       │        │     │       │      │              │       │                                                              
   187 │    9% │     1% │  4% │       │ -921 │▁▁▁▁▁▁▁▁▁     │     8 │<span class="r3">                </span><span class="r7">+</span><span class="r3"> (zC </span><span class="r7">*</span><span class="r3"> Gamma_wake_rotation)</span><span class="r6">               </span>   
   ... │       │        │     │       │      │              │       │                                                              
   189 │    2% │        │  1% │       │  -33 │▁▁▁▁▁         │     2 │<span class="r3">                </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">exp(</span><span class="r7">-</span><span class="r3">rC </span><span class="r7">/</span><span class="r3"> (eps </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)))</span><span class="r6">           </span>   
   ... │       │        │     │       │      │              │       │                                                              
   192 │    1% │        │  1% │       │  -33 │▁▁▁▁▁         │       │<span class="r3">            tmp </span><span class="r7">=</span><span class="r3"> avg_V </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">mean(Veff, axis</span><span class="r7">=1</span><span class="r3">)</span><span class="r6">            </span>   
   193 │       │        │     │       │   -2 │▁▁▁▁▁▁        │       │<span class="r3">            target_yaw_ix </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">argmin(np</span><span class="r7">.</span><span class="r3">abs(tmp))</span><span class="r6">         </span>   
   ... │       │        │     │       │      │              │       │                                                              
   196 │       │        │     │   58% │    2 │▁▁            │       │<span class="r3">                yaw_effective </span><span class="r7">=</span><span class="r3"> test_gamma[target_yaw_ix]</span><span class="r6">  </span>   
   ... │       │        │     │       │      │              │       │                                                              
   202 │       │        │     │       │    1 │▁             │       │<span class="r3">            </span><span class="r4">return</span><span class="r3"> yaw_effective </span><span class="r7">+</span><span class="r3"> turbine</span><span class="r7">.</span><span class="r3">yaw_angle</span><span class="r6">       </span>   
   ... │       │        │     │       │      │              │       │                                                              
       ╵       ╵        ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">/Users/rhammond/Documents/GitHub/floris/floris/simulation/wake_velocity/gaussianModels/gauss_legacy.py: % of time =  12.36% out of</span>
<span class="r11">                                                             401.61s.                                                             </span>
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/Users/rhammond/Documents/GitHub/floris/floris/simulation/w… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
    90 │       │       │     │       │   13 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">function</span><span class="r3">(</span><span class="r6">                                          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   141 │       │       │     │       │    0 │▁▁▁           │       │<span class="r3">            </span><span class="r9">self</span><span class="r7">.</span><span class="r3">gch_gain </span><span class="r7">*</span><span class="r3"> TI_mixing</span><span class="r6">                      </span>   
   142 │       │       │     │       │    0 │▁▁▁           │       │<span class="r3">        TI </span><span class="r7">=</span><span class="r3"> copy</span><span class="r7">.</span><span class="r3">deepcopy(turbine</span><span class="r7">.</span><span class="r3">current_turbulence_inte…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   145 │       │       │     │   61% │    1 │▁             │       │<span class="r3">        D </span><span class="r7">=</span><span class="r3"> turbine</span><span class="r7">.</span><span class="r3">rotor_diameter</span><span class="r6">                         </span>   
   ... │       │       │     │       │      │              │       │                                                              
   164 │       │       │     │       │    4 │▁▁▁▁▁▁        │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r6">                                            </span>   
   165 │       │       │     │       │  -13 │▁▁▁▁▁         │       │<span class="r3">                np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">2</span><span class="r3">)</span><span class="r6">                                 </span>   
   166 │       │       │     │       │   17 │▁▁▁▁▁▁▁       │       │<span class="r3">                </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">alpha </span><span class="r7">*</span><span class="r3"> TI </span><span class="r7">+</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">beta </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   168 │       │       │     │       │    1 │▁▁▁▁▁         │       │<span class="r3">            </span><span class="r7">+</span><span class="r3"> turbine_coord</span><span class="r7">.</span><span class="r3">x1</span><span class="r6">                             </span>   
   ... │       │       │     │       │      │              │       │                                                              
   172 │    1% │       │  0% │       │   61 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        sigma_y </span><span class="r7">=</span><span class="r3"> (((x0 </span><span class="r7">-</span><span class="r3"> xR) </span><span class="r7">-</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> xR)) </span><span class="r7">/</span><span class="r3"> (x0 </span><span class="r7">…</span>   
   173 │       │       │     │       │  -18 │▁▁▁▁          │       │<span class="r3">            Ct </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2.0</span><span class="r6">                                       </span>   
   174 │       │       │     │       │    8 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        ) </span><span class="r7">+</span><span class="r3"> ((x_locations </span><span class="r7">-</span><span class="r3"> xR) </span><span class="r7">/</span><span class="r3"> (x0 </span><span class="r7">-</span><span class="r3"> xR)) </span><span class="r7">*</span><span class="r3"> sigma_y0</span><span class="r6">    </span>   
   175 │    1% │       │  0% │       │   36 │▁▁▁▁          │       │<span class="r3">        sigma_z </span><span class="r7">=</span><span class="r3"> (((x0 </span><span class="r7">-</span><span class="r3"> xR) </span><span class="r7">-</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> xR)) </span><span class="r7">/</span><span class="r3"> (x0 </span><span class="r7">…</span>   
   176 │       │       │     │       │  -14 │▁▁▁▁▁▁        │       │<span class="r3">            Ct </span><span class="r7">/</span><span class="r3"> </span><span class="r7">2.0</span><span class="r6">                                       </span>   
   177 │       │       │     │       │  -59 │▁▁▁▁▁         │       │<span class="r3">        ) </span><span class="r7">+</span><span class="r3"> ((x_locations </span><span class="r7">-</span><span class="r3"> xR) </span><span class="r7">/</span><span class="r3"> (x0 </span><span class="r7">-</span><span class="r3"> xR)) </span><span class="r7">*</span><span class="r3"> sigma_z0</span><span class="r6">    </span>   
   178 │       │       │     │       │  -11 │▁▁▁▁▁         │       │<span class="r3">        sigma_y[x_locations </span><span class="r7">&lt;</span><span class="r3"> xR] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0.5</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> D</span><span class="r6">                </span>   
   179 │       │       │     │       │    2 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        sigma_z[x_locations </span><span class="r7">&lt;</span><span class="r3"> xR] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0.5</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> D</span><span class="r6">                </span>   
   ... │       │       │     │       │      │              │       │                                                              
   181 │    1% │       │  0% │       │   50 │▁▁▁▁          │       │<span class="r3">        a </span><span class="r7">=</span><span class="r3"> cosd(veer) </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma_y </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">) </span><span class="r7">+</span><span class="r3"> sind(ve…</span>   
   182 │    1% │       │  0% │       │   44 │▁▁▁▁▁▁        │       │<span class="r3">        b </span><span class="r7">=</span><span class="r3"> </span><span class="r7">-</span><span class="r3">sind(</span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> veer) </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma_y </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">) </span><span class="r7">+</span><span class="r3"> sind(</span><span class="r7">2</span><span class="r3"> </span><span class="r7">…</span>   
   183 │    1% │       │  0% │       │   40 │▁▁▁▁▁▁        │       │<span class="r3">        c </span><span class="r7">=</span><span class="r3"> sind(veer) </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma_y </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">) </span><span class="r7">+</span><span class="r3"> cosd(ve…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   187 │    1% │       │  1% │       │   98 │▁▁▁▁          │       │<span class="r3">            </span><span class="r7">+</span><span class="r3"> c </span><span class="r7">*</span><span class="r3"> ((z_locations </span><span class="r7">-</span><span class="r3"> HH)) </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">                </span>   
   ... │       │       │     │       │      │              │       │                                                              
   189 │    1% │       │  0% │       │   71 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        C </span><span class="r7">=</span><span class="r3"> </span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (Ct </span><span class="r7">*</span><span class="r3"> cosd(yaw) </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">8.0</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   191 │       │       │     │       │    0 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        velDef </span><span class="r7">=</span><span class="r3"> GaussianModel</span><span class="r7">.</span><span class="r3">gaussian_function(U_local, …</span>   
   192 │       │       │     │       │   -5 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        velDef[x_locations </span><span class="r7">&lt;</span><span class="r3"> xR] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0</span><span class="r6">                       </span>   
   193 │       │       │     │       │  -18 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        velDef[x_locations </span><span class="r7">&gt;</span><span class="r3"> x0] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0</span><span class="r6">                       </span>   
   ... │       │       │     │       │      │              │       │                                                              
   196 │       │       │     │       │    3 │▁▁▁▁▁▁▁       │       │<span class="r3">        ky </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">ka </span><span class="r7">*</span><span class="r3"> TI </span><span class="r7">+</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">kb  </span><span class="r8"># wake expansion para…</span>   
   197 │       │       │     │   60% │   -4 │▁▁▁▁▁▁        │       │<span class="r3">        kz </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">ka </span><span class="r7">*</span><span class="r3"> TI </span><span class="r7">+</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">kb  </span><span class="r8"># wake expansion para…</span>   
   198 │       │       │     │       │   85 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        sigma_y </span><span class="r7">=</span><span class="r3"> ky </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> x0) </span><span class="r7">+</span><span class="r3"> sigma_y0</span><span class="r6">       </span>   
   199 │       │       │     │       │   54 │▁▁▁▁          │       │<span class="r3">        sigma_z </span><span class="r7">=</span><span class="r3"> kz </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> x0) </span><span class="r7">+</span><span class="r3"> sigma_z0</span><span class="r6">       </span>   
   200 │       │       │     │       │  -78 │▁▁▁▁▁▁        │       │<span class="r3">        sigma_y[x_locations </span><span class="r7">&lt;</span><span class="r3"> x0] </span><span class="r7">=</span><span class="r3"> sigma_y0[x_locations </span><span class="r7">&lt;</span><span class="r3">…</span>   
   201 │       │       │     │       │   10 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        sigma_z[x_locations </span><span class="r7">&lt;</span><span class="r3"> x0] </span><span class="r7">=</span><span class="r3"> sigma_z0[x_locations </span><span class="r7">&lt;</span><span class="r3">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   204 │    1% │       │  0% │       │   43 │▁▁▁▁▁▁▁       │       │<span class="r3">        a </span><span class="r7">=</span><span class="r3"> cosd(veer) </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma_y </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">) </span><span class="r7">+</span><span class="r3"> sind(ve…</span>   
   205 │    1% │       │  0% │       │  -36 │▁▁▁▁          │       │<span class="r3">        b </span><span class="r7">=</span><span class="r3"> </span><span class="r7">-</span><span class="r3">sind(</span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> veer) </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma_y </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">) </span><span class="r7">+</span><span class="r3"> sind(</span><span class="r7">2</span><span class="r3"> </span><span class="r7">…</span>   
   206 │    1% │       │  0% │       │    7 │▁▁▁▁▁         │       │<span class="r3">        c </span><span class="r7">=</span><span class="r3"> sind(veer) </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma_y </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">) </span><span class="r7">+</span><span class="r3"> cosd(ve…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   210 │    1% │       │  1% │       │  -67 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            </span><span class="r7">+</span><span class="r3"> c </span><span class="r7">*</span><span class="r3"> (z_locations </span><span class="r7">-</span><span class="r3"> HH) </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">                  </span>   
   ... │       │       │     │       │      │              │       │                                                              
   212 │    1% │       │  0% │       │   -5 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        C </span><span class="r7">=</span><span class="r3"> </span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (Ct </span><span class="r7">*</span><span class="r3"> cosd(yaw) </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">8.0</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> sigma…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   215 │       │       │     │       │  -85 │▁▁▁▁▁▁▁       │       │<span class="r3">        velDef1 </span><span class="r7">=</span><span class="r3"> GaussianModel</span><span class="r7">.</span><span class="r3">gaussian_function(U_local,…</span>   
   216 │       │       │     │       │  -17 │▁▁▁▁▁         │       │<span class="r3">        velDef1[x_locations </span><span class="r7">&lt;</span><span class="r3"> x0] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0</span><span class="r6">                      </span>   
   ... │       │       │     │       │      │              │       │                                                              
   218 │       │       │     │       │   81 │▁▁▁▁▁▁▁       │       │<span class="r3">        U </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(velDef </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> velDef1 </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3">)</span><span class="r6">            </span>   
   ... │       │       │     │       │      │              │       │                                                              
   220 │       │       │     │       │  185 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> U, np</span><span class="r7">.</span><span class="r3">zeros(np</span><span class="r7">.</span><span class="r3">shape(velDef1)), np</span><span class="r7">.</span><span class="r3">zeros(np</span><span class="r7">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">     /Users/rhammond/Documents/GitHub/floris/floris/simulation/wake_deflection/gauss.py: % of time =   7.96% out of 401.61s.      </span>
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/Users/rhammond/Documents/GitHub/floris/floris/simulation/w… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
    96 │       │       │     │       │   20 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">function</span><span class="r3">(</span><span class="r6">                                          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   144 │       │       │     │       │ -250 │▁▁▁▁▁▁        │       │<span class="r3">            x_locations, y_locations, z_locations, turbine…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   160 │       │       │     │       │  111 │▁▁▁▁▁         │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (</span><span class="r7">2.0</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> (Ct </span><span class="r7">*</span><span class="r3"> cosd(tilt) </span><span class="r7">*</span><span class="r3"> c…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   162 │       │       │     │   52% │   88 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        u0 </span><span class="r7">=</span><span class="r3"> U_local </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> Ct)</span><span class="r6">                     </span>   
   ... │       │       │     │       │      │              │       │                                                              
   168 │       │       │     │   52% │  -11 │▁▁▁▁▁         │       │<span class="r3">            </span><span class="r7">/</span><span class="r3"> (np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">2</span><span class="r3">) </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">4</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> alpha </span><span class="r7">*</span><span class="r3"> TI </span><span class="r7">+</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> beta </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   173 │       │       │     │       │    1 │▁▁▁           │       │<span class="r3">        ky </span><span class="r7">=</span><span class="r3"> ka </span><span class="r7">*</span><span class="r3"> TI </span><span class="r7">+</span><span class="r3"> kb</span><span class="r6">                                  </span>   
   ... │       │       │     │       │      │              │       │                                                              
   176 │       │       │     │       │   78 │▁▁▁▁▁▁        │       │<span class="r3">        C0 </span><span class="r7">=</span><span class="r3"> </span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> u0 </span><span class="r7">/</span><span class="r3"> wind_speed</span><span class="r6">                           </span>   
   177 │       │       │     │       │   88 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        M0 </span><span class="r7">=</span><span class="r3"> C0 </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">2</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> C0)</span><span class="r6">                                 </span>   
   178 │       │       │     │       │   71 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        E0 </span><span class="r7">=</span><span class="r3"> C0 </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> </span><span class="r7">3</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">exp(</span><span class="r7">1.0</span><span class="r3"> </span><span class="r7">/</span><span class="r3"> </span><span class="r7">12.0</span><span class="r3">) </span><span class="r7">*</span><span class="r3"> C0 </span><span class="r7">+</span><span class="r3"> </span><span class="r7">3</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> n…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   181 │       │       │     │       │  108 │▁▁▁▁▁▁        │       │<span class="r3">        sigma_z0 </span><span class="r7">=</span><span class="r3"> D </span><span class="r7">*</span><span class="r3"> </span><span class="r7">0.5</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(uR </span><span class="r7">/</span><span class="r3"> (U_local </span><span class="r7">+</span><span class="r3"> u0))</span><span class="r6">  </span>   
   182 │       │       │     │       │   83 │▁▁▁▁▁         │       │<span class="r3">        sigma_y0 </span><span class="r7">=</span><span class="r3"> sigma_z0 </span><span class="r7">*</span><span class="r3"> cosd(yaw) </span><span class="r7">*</span><span class="r3"> cosd(veer)</span><span class="r6">       </span>   
   ... │       │       │     │       │      │              │       │                                                              
   184 │       │       │     │       │   90 │▁▁▁▁▁▁        │       │<span class="r3">        yR </span><span class="r7">=</span><span class="r3"> y_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x2</span><span class="r6">                        </span>   
   185 │       │       │     │       │  106 │▁▁▁▁          │       │<span class="r3">        xR </span><span class="r7">=</span><span class="r3"> yR </span><span class="r7">*</span><span class="r3"> tand(yaw) </span><span class="r7">+</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1</span><span class="r6">                     </span>   
   ... │       │       │     │       │      │              │       │                                                              
   191 │       │       │     │       │   -3 │▁▁▁▁▁▁▁       │       │<span class="r3">            </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> Ct </span><span class="r7">*</span><span class="r3"> cosd(yaw)))</span><span class="r6">            </span>   
   ... │       │       │     │       │      │              │       │                                                              
   193 │       │       │     │   53% │    4 │▁▁▁▁▁▁        │       │<span class="r3">        delta0 </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">tan(theta_c0) </span><span class="r7">*</span><span class="r3"> (x0 </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1)  </span><span class="r8"># ini…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   197 │       │       │     │       │   78 │▁▁▁▁▁▁        │       │<span class="r3">        delta_near_wake </span><span class="r7">=</span><span class="r3"> ((x_locations </span><span class="r7">-</span><span class="r3"> xR) </span><span class="r7">/</span><span class="r3"> (x0 </span><span class="r7">-</span><span class="r3"> xR))…</span>   
   198 │       │       │     │       │  -24 │▁▁▁▁▁▁        │       │<span class="r3">            ad </span><span class="r7">+</span><span class="r3"> bd </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1)</span><span class="r6">             </span>   
   ... │       │       │     │       │      │              │       │                                                              
   200 │       │       │     │   54% │   -7 │▁▁▁▁▁         │       │<span class="r3">        delta_near_wake[x_locations </span><span class="r7">&lt;</span><span class="r3"> xR] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0.0</span><span class="r6">            </span>   
   201 │       │       │     │       │   -4 │▁▁▁▁▁▁        │       │<span class="r3">        delta_near_wake[x_locations </span><span class="r7">&gt;</span><span class="r3"> x0] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0.0</span><span class="r6">            </span>   
   ... │       │       │     │       │      │              │       │                                                              
   204 │       │       │     │       │   45 │▁▁▁▁▁         │       │<span class="r3">        sigma_y </span><span class="r7">=</span><span class="r3"> ky </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> x0) </span><span class="r7">+</span><span class="r3"> sigma_y0</span><span class="r6">       </span>   
   205 │       │       │     │       │   83 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        sigma_z </span><span class="r7">=</span><span class="r3"> kz </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> x0) </span><span class="r7">+</span><span class="r3"> sigma_z0</span><span class="r6">       </span>   
   206 │       │       │     │       │  -23 │▁▁▁▁▁         │       │<span class="r3">        sigma_y[x_locations </span><span class="r7">&lt;</span><span class="r3"> x0] </span><span class="r7">=</span><span class="r3"> sigma_y0[x_locations </span><span class="r7">&lt;</span><span class="r3">…</span>   
   207 │       │       │     │       │  -53 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        sigma_z[x_locations </span><span class="r7">&lt;</span><span class="r3"> x0] </span><span class="r7">=</span><span class="r3"> sigma_z0[x_locations </span><span class="r7">&lt;</span><span class="r3">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   209 │       │       │     │       │   51 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        ln_deltaNum </span><span class="r7">=</span><span class="r3"> (</span><span class="r7">1.6</span><span class="r3"> </span><span class="r7">+</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(M0)) </span><span class="r7">*</span><span class="r3"> (</span><span class="r6">              </span>   
   210 │    1% │       │  0% │       │   -6 │▁▁▁▁▁▁        │       │<span class="r3">            </span><span class="r7">1.6</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(sigma_y </span><span class="r7">*</span><span class="r3"> sigma_z </span><span class="r7">/</span><span class="r3"> (sigma_y0 </span><span class="r7">*</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   212 │       │       │     │       │   62 │▁▁▁▁          │       │<span class="r3">        ln_deltaDen </span><span class="r7">=</span><span class="r3"> (</span><span class="r7">1.6</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(M0)) </span><span class="r7">*</span><span class="r3"> (</span><span class="r6">              </span>   
   213 │    1% │       │  0% │       │  -61 │▁▁▁▁▁         │       │<span class="r3">            </span><span class="r7">1.6</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(sigma_y </span><span class="r7">*</span><span class="r3"> sigma_z </span><span class="r7">/</span><span class="r3"> (sigma_y0 </span><span class="r7">*</span><span class="r3"> …</span>   
   ... │       │       │     │       │      │              │       │                                                              
   220 │    1% │       │  1% │       │   52 │▁▁▁▁▁▁        │       │<span class="r3">            </span><span class="r7">+</span><span class="r3"> (ad </span><span class="r7">+</span><span class="r3"> bd </span><span class="r7">*</span><span class="r3"> (x_locations </span><span class="r7">-</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1))</span><span class="r6">         </span>   
   ... │       │       │     │       │      │              │       │                                                              
   222 │       │       │     │       │    2 │▁▁▁▁          │       │<span class="r3">        delta_far_wake[x_locations </span><span class="r7">&lt;=</span><span class="r3"> x0] </span><span class="r7">=</span><span class="r3"> </span><span class="r7">0.0</span><span class="r6">            </span>   
   ... │       │       │     │       │      │              │       │                                                              
   224 │       │       │     │       │   75 │▁▁▁▁▁         │       │<span class="r3">        deflection </span><span class="r7">=</span><span class="r3"> delta_near_wake </span><span class="r7">+</span><span class="r3"> delta_far_wake</span><span class="r6">      </span>   
   ... │       │       │     │       │      │              │       │                                                              
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">     /opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/numpy/core/_methods.py: % of time =   4.33% out of 401.61s.      </span>
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
    26 │       │       │     │       │    1 │▁             │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">_amax</span><span class="r3">(a, axis</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, out</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, keepdims</span><span class="r7">=</span><span class="r4">False</span><span class="r3">,</span><span class="r6">          </span>   
   ... │       │       │     │       │      │              │       │                                                              
    28 │       │       │     │       │   -4 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> umr_maximum(a, axis, </span><span class="r4">None</span><span class="r3">, out, keepdims, initi…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    30 │       │       │     │   94% │    1 │▁             │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">_amin</span><span class="r3">(a, axis</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, out</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, keepdims</span><span class="r7">=</span><span class="r4">False</span><span class="r3">,</span><span class="r6">          </span>   
   ... │       │       │     │       │      │              │       │                                                              
    32 │       │       │     │       │  -16 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> umr_minimum(a, axis, </span><span class="r4">None</span><span class="r3">, out, keepdims, initi…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    36 │       │       │     │       │   -5 │▁▁▁▁▁▁▁       │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> umr_sum(a, axis, dtype, out, keepdims, initial)</span><span class="r6"> </span>   
   ... │       │       │     │       │      │              │       │                                                              
    42 │       │       │     │       │    5 │▁▁▁▁▁▁▁▁▁     │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">_any</span><span class="r3">(a, axis</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, dtype</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, out</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, keepdims</span><span class="r7">=</span><span class="r4">Fals…</span>   
    43 │       │       │     │       │  -16 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> umr_any(a, axis, dtype, out, keepdims)</span><span class="r6">          </span>   
   ... │       │       │     │       │      │              │       │                                                              
    46 │       │       │     │       │  -17 │▁▁▁▁▁         │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> umr_all(a, axis, dtype, out, keepdims)</span><span class="r6">          </span>   
   ... │       │       │     │       │      │              │       │                                                              
    50 │       │       │     │       │    8 │▁▁▁▁          │       │<span class="r3">        axis </span><span class="r7">=</span><span class="r3"> </span><span class="r9">tuple</span><span class="r3">(</span><span class="r9">range</span><span class="r3">(arr</span><span class="r7">.</span><span class="r3">ndim))</span><span class="r6">                      </span>   
    51 │       │       │     │  100% │   -3 │▁▁▁▁▁         │       │<span class="r3">    </span><span class="r4">if</span><span class="r3"> </span><span class="r12">not</span><span class="r3"> </span><span class="r9">isinstance</span><span class="r3">(axis, </span><span class="r9">tuple</span><span class="r3">):</span><span class="r6">                        </span>   
   ... │       │       │     │       │      │              │       │                                                              
    54 │       │       │     │       │ -166 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">for</span><span class="r3"> ax </span><span class="r12">in</span><span class="r3"> axis:</span><span class="r6">                                        </span>   
    55 │       │       │     │       │    0 │▁▁▁           │       │<span class="r3">        items </span><span class="r7">*=</span><span class="r3"> arr</span><span class="r7">.</span><span class="r3">shape[ax]</span><span class="r6">                             </span>   
   ... │       │       │     │       │      │              │       │                                                              
    58 │       │       │     │   52% │   -2 │▁▁▁▁▁▁        │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">_mean</span><span class="r3">(a, axis</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, dtype</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, out</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, keepdims</span><span class="r7">=</span><span class="r4">Fal…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    69 │       │       │     │       │    3 │▁▁▁           │       │<span class="r3">        </span><span class="r4">if</span><span class="r3"> </span><span class="r9">issubclass</span><span class="r3">(arr</span><span class="r7">.</span><span class="r3">dtype</span><span class="r7">.</span><span class="r3">type, (nt</span><span class="r7">.</span><span class="r3">integer, nt</span><span class="r7">.</span><span class="r3">bool…</span>   
    70 │       │       │     │       │    2 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            dtype </span><span class="r7">=</span><span class="r3"> mu</span><span class="r7">.</span><span class="r3">dtype(</span><span class="r13">'f8'</span><span class="r3">)</span><span class="r6">                         </span>   
   ... │       │       │     │       │      │              │       │                                                              
    75 │    1% │       │  0% │       │   61 │▁▁▁▁▁▁▁       │       │<span class="r3">    ret </span><span class="r7">=</span><span class="r3"> umr_sum(arr, axis, dtype, out, keepdims)</span><span class="r6">         </span>   
    76 │    1% │       │  1% │   82% │  -16 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">if</span><span class="r3"> </span><span class="r9">isinstance</span><span class="r3">(ret, mu</span><span class="r7">.</span><span class="r3">ndarray):</span><span class="r6">                        </span>   
   ... │       │       │     │       │      │              │       │                                                              
    78 │       │       │     │   51% │    7 │▁▁▁▁▁         │       │<span class="r3">                ret, rcount, out</span><span class="r7">=</span><span class="r3">ret, casting</span><span class="r7">=</span><span class="r13">'unsafe'</span><span class="r3">, su…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    85 │       │       │     │       │   19 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            ret </span><span class="r7">=</span><span class="r3"> ret</span><span class="r7">.</span><span class="r3">dtype</span><span class="r7">.</span><span class="r3">type(ret </span><span class="r7">/</span><span class="r3"> rcount)</span><span class="r6">             </span>   
   ... │       │       │     │       │      │              │       │                                                              
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">            /Users/rhammond/Documents/GitHub/floris/floris/simulation/turbine.py: % of time =   3.88% out of 401.61s.             </span>
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/Users/rhammond/Documents/GitHub/floris/floris/simulation/t… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
   218 │       │       │     │       │    2 │▁▁            │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">_fCt</span><span class="r3">(</span><span class="r9">self</span><span class="r3">, at_wind_speed):</span><span class="r6">                         </span>   
   ... │       │       │     │       │      │              │       │                                                              
   220 │       │       │     │       │  -23 │▁▁▁▁▁▁▁       │       │<span class="r3">        </span><span class="r4">if</span><span class="r3"> at_wind_speed </span><span class="r7">&lt;</span><span class="r3"> </span><span class="r9">min</span><span class="r3">(wind_speed):</span><span class="r6">                </span>   
   ... │       │       │     │       │      │              │       │                                                              
   223 │       │       │     │       │  -55 │▁▁▁▁▁         │       │<span class="r3">            _ct </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">fCtInterp(at_wind_speed)</span><span class="r6">            </span>   
   ... │       │       │     │       │      │              │       │                                                              
   226 │       │       │     │       │   -2 │▁▁▁▁          │       │<span class="r3">            </span><span class="r4">if</span><span class="r3"> _ct </span><span class="r7">&gt;</span><span class="r3"> </span><span class="r7">1.0</span><span class="r3">:</span><span class="r6">                                  </span>   
   ... │       │       │     │       │      │              │       │                                                              
   246 │       │       │     │       │    0 │▁▁▁           │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">calculate_swept_area_velocities</span><span class="r3">(</span><span class="r6">                   </span>   
   ... │       │       │     │       │      │              │       │                                                              
   308 │       │       │     │       │    8 │▁▁▁▁▁▁        │       │<span class="r3">                np</span><span class="r7">.</span><span class="r3">array(u_at_turbine</span><span class="r7">.</span><span class="r3">flatten()[ii]),</span><span class="r6">      </span>   
   309 │       │       │     │       │   -4 │▁▁▁▁▁▁        │       │<span class="r3">                np</span><span class="r7">.</span><span class="r3">array(additional_wind_speed</span><span class="r7">.</span><span class="r3">flatten()[i…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   312 │       │       │     │       │   -4 │▁▁▁▁          │       │<span class="r3">            </span><span class="r4">return</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">array(u_at_turbine</span><span class="r7">.</span><span class="r3">flatten()[ii])</span><span class="r6">    </span>   
   ... │       │       │     │       │      │              │       │                                                              
   355 │       │       │     │       │   91 │▁▁▁▁▁         │       │<span class="r3">        local_wind_speed </span><span class="r7">=</span><span class="r3"> flow_field</span><span class="r7">.</span><span class="r3">u_initial </span><span class="r7">-</span><span class="r3"> u_wake</span><span class="r6">   </span>   
   356 │       │       │     │  100% │    1 │▁             │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">velocities </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">calculate_swept_area_veloci…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   365 │       │       │     │   51% │   -3 │▁▁▁▁▁▁▁       │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">velocities </span><span class="r7">=</span><span class="r3"> [</span><span class="r7">0.0</span><span class="r3">] </span><span class="r7">*</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">grid_point_count</span><span class="r6">    </span>   
   ... │       │       │     │       │      │              │       │                                                              
   394 │       │       │     │       │   11 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            np</span><span class="r7">.</span><span class="r3">sqrt((</span><span class="r7">2</span><span class="r3"> </span><span class="r7">/</span><span class="r3"> </span><span class="r7">3</span><span class="r3">) </span><span class="r7">*</span><span class="r3"> turbulence_kinetic_energy)</span><span class="r6">   </span>   
   395 │       │       │     │       │    0 │▁▁▁▁▁▁        │       │<span class="r3">        ) </span><span class="r7">/</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">average_velocity</span><span class="r6">                          </span>   
   ... │       │       │     │       │      │              │       │                                                              
   398 │       │       │     │       │    1 │▁             │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">TI_to_TKE</span><span class="r3">(</span><span class="r9">self</span><span class="r3">):</span><span class="r6">                                   </span>   
   ... │       │       │     │       │      │              │       │                                                              
   406 │       │       │     │       │   -5 │▁▁▁▁▁         │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> ((</span><span class="r9">self</span><span class="r7">.</span><span class="r3">average_velocity </span><span class="r7">*</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">current_turb…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   417 │       │       │     │       │   -2 │▁▁▁▁▁▁        │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">2</span><span class="r3"> </span><span class="r7">*</span><span class="r3"> tke)</span><span class="r6">                            </span>   
   ... │       │       │     │       │      │              │       │                                                              
   421 │       │       │     │       │    0 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    </span><span class="r10">@property</span><span class="r6">                                              </span>   
   ... │       │       │     │       │      │              │       │                                                              
   461 │       │       │     │       │   -2 │▁▁▁▁          │       │<span class="r3">    </span><span class="r10">@property</span><span class="r6">                                              </span>   
   ... │       │       │     │       │      │              │       │                                                              
   561 │       │       │     │       │    0 │▁▁▁▁▁         │       │<span class="r3">    </span><span class="r10">@property</span><span class="r6">                                              </span>   
   ... │       │       │     │       │      │              │       │                                                              
   576 │       │       │  0% │       │   14 │▁▁▁▁▁▁        │       │<span class="r3">        data </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">velocities[np</span><span class="r7">.</span><span class="r3">where(</span><span class="r7">~</span><span class="r3">np</span><span class="r7">.</span><span class="r3">isnan(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">vel…</span>   
   577 │    1% │       │  0% │       │  -60 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        avg_vel </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">cbrt(np</span><span class="r7">.</span><span class="r3">mean(data </span><span class="r7">**</span><span class="r3"> </span><span class="r7">3</span><span class="r3">))</span><span class="r6">              </span>   
   578 │    1% │       │  0% │       │   -6 │▁▁▁▁          │       │<span class="r3">        </span><span class="r4">if</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">isnan(avg_vel):</span><span class="r6">                              </span>   
   ... │       │       │     │       │      │              │       │                                                              
   580 │       │       │     │       │   -8 │▁▁▁▁          │       │<span class="r3">        </span><span class="r4">elif</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">isinf(avg_vel):</span><span class="r6">                            </span>   
   ... │       │       │     │       │      │              │       │                                                              
   613 │       │       │     │       │    0 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r10">@property</span><span class="r6">                                              </span>   
   ... │       │       │     │       │      │              │       │                                                              
   633 │       │       │     │       │  -79 │▁▁▁▁▁         │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">_fCt(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">average_velocity) </span><span class="r7">*</span><span class="r3"> cosd(</span><span class="r9">sel…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   659 │       │       │     │       │    0 │▁▁▁▁▁         │       │<span class="r3">        yaw_effective_velocity </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">average_velocity </span><span class="r7">*</span><span class="r3"> c…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   665 │       │       │     │       │  -20 │▁▁▁▁          │       │<span class="r3">            </span><span class="r7">*</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">turbulence_parameter</span><span class="r6">                    </span>   
   ... │       │       │     │       │      │              │       │                                                              
   686 │       │       │     │       │    7 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            </span><span class="r7">*</span><span class="r3"> (</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sqrt(</span><span class="r7">1</span><span class="r3"> </span><span class="r7">-</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">Ct </span><span class="r7">*</span><span class="r3"> cosd(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">yaw_ang…</span>   
   ... │       │       │     │       │      │              │       │                                                              
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/scipy/interpolate/interpolate.py: % of time =   3.21% out of 401.61s. </span>
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
   583 │       │       │     │       │    2 │▁▁            │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">_call_linear</span><span class="r3">(</span><span class="r9">self</span><span class="r3">, x_new):</span><span class="r6">                         </span>   
   ... │       │       │     │       │      │              │       │                                                              
   592 │       │       │     │       │    4 │▁▁▁▁          │       │<span class="r3">        x_new_indices </span><span class="r7">=</span><span class="r3"> x_new_indices</span><span class="r7">.</span><span class="r3">clip(</span><span class="r7">1</span><span class="r3">, </span><span class="r9">len</span><span class="r3">(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">x)</span><span class="r7">-…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   595 │       │       │     │       │   -7 │▁▁▁▁▁▁▁       │       │<span class="r3">        lo </span><span class="r7">=</span><span class="r3"> x_new_indices </span><span class="r7">-</span><span class="r3"> </span><span class="r7">1</span><span class="r6">                             </span>   
   ... │       │       │     │       │      │              │       │                                                              
   598 │       │       │     │       │   23 │▁▁▁▁▁▁▁       │       │<span class="r3">        x_lo </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">x[lo]</span><span class="r6">                                  </span>   
   599 │       │       │     │       │   25 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        x_hi </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">x[hi]</span><span class="r6">                                  </span>   
   600 │       │       │     │       │   66 │▁▁▁▁▁▁        │       │<span class="r3">        y_lo </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">_y[lo]</span><span class="r6">                                 </span>   
   601 │    1% │       │  0% │       │    5 │▁▁▁▁▁▁▁       │       │<span class="r3">        y_hi </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">_y[hi]</span><span class="r6">                                 </span>   
   ... │       │       │     │       │      │              │       │                                                              
   605 │    1% │       │  0% │       │   23 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        slope </span><span class="r7">=</span><span class="r3"> (y_hi </span><span class="r7">-</span><span class="r3"> y_lo) </span><span class="r7">/</span><span class="r3"> (x_hi </span><span class="r7">-</span><span class="r3"> x_lo)[:, </span><span class="r4">None</span><span class="r3">]</span><span class="r6">     </span>   
   ... │       │       │     │       │      │              │       │                                                              
   608 │       │       │     │       │   37 │▁▁▁▁▁         │       │<span class="r3">        y_new </span><span class="r7">=</span><span class="r3"> slope</span><span class="r7">*</span><span class="r3">(x_new </span><span class="r7">-</span><span class="r3"> x_lo)[:, </span><span class="r4">None</span><span class="r3">] </span><span class="r7">+</span><span class="r3"> y_lo</span><span class="r6">       </span>   
   ... │       │       │     │       │      │              │       │                                                              
   652 │       │       │     │       │    2 │▁▁▁▁          │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">_evaluate</span><span class="r3">(</span><span class="r9">self</span><span class="r3">, x_new):</span><span class="r6">                            </span>   
   ... │       │       │     │       │      │              │       │                                                              
   657 │       │       │     │       │ -180 │▁▁▁▁▁▁        │       │<span class="r3">        y_new </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">_call(</span><span class="r9">self</span><span class="r3">, x_new)</span><span class="r6">                    </span>   
   ... │       │       │     │       │      │              │       │                                                              
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">                 /Users/rhammond/Documents/GitHub/floris/floris/utilities.py: % of time =   3.04% out of 401.61s.                 </span>
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/Users/rhammond/Documents/GitHub/floris/floris/utilities.py  </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
    19 │       │       │     │   63% │ -135 │▁▁▁▁▁         │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">__init__</span><span class="r3">(</span><span class="r9">self</span><span class="r3">, x1, x2</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, x3</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, string_format</span><span class="r7">…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    44 │       │       │     │       │ -112 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            </span><span class="r9">self</span><span class="r7">.</span><span class="r3">x1 </span><span class="r7">=</span><span class="r3"> x1</span><span class="r6">                                   </span>   
   ... │       │       │     │       │      │              │       │                                                              
    82 │       │       │     │       │    2 │▁▁▁▁          │       │<span class="r3">        x1offset </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">x1 </span><span class="r7">-</span><span class="r3"> center_of_rotation</span><span class="r7">.</span><span class="r3">x1</span><span class="r6">         </span>   
    83 │       │       │     │       │    5 │▁▁▁▁▁▁▁       │       │<span class="r3">        x2offset </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">x2 </span><span class="r7">-</span><span class="r3"> center_of_rotation</span><span class="r7">.</span><span class="r3">x2</span><span class="r6">         </span>   
   ... │       │       │     │       │      │              │       │                                                              
    85 │       │       │     │       │   -4 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            x1offset </span><span class="r7">*</span><span class="r3"> cosd(theta) </span><span class="r7">-</span><span class="r3"> x2offset </span><span class="r7">*</span><span class="r3"> sind(theta…</span>   
   ... │       │       │     │       │      │              │       │                                                              
    88 │       │       │     │       │  -15 │▁▁▁▁▁▁▁       │       │<span class="r3">            x2offset </span><span class="r7">*</span><span class="r3"> cosd(theta) </span><span class="r7">+</span><span class="r3"> x1offset </span><span class="r7">*</span><span class="r3"> sind(theta…</span>   
   ... │       │       │     │       │      │              │       │                                                              
   128 │       │       │     │   60% │    4 │▁▁▁▁          │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> </span><span class="r9">hash</span><span class="r3">((</span><span class="r9">self</span><span class="r7">.</span><span class="r3">x1, </span><span class="r9">self</span><span class="r7">.</span><span class="r3">x2, </span><span class="r9">self</span><span class="r7">.</span><span class="r3">x3))</span><span class="r6">           </span>   
   ... │       │       │     │       │      │              │       │                                                              
   131 │       │       │     │   68% │   -2 │▁▁▁▁▁▁▁▁      │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">cosd</span><span class="r3">(angle):</span><span class="r6">                                           </span>   
   ... │       │       │     │       │      │              │       │                                                              
   141 │    2% │       │  0% │       │  144 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">cos(np</span><span class="r7">.</span><span class="r3">radians(angle))</span><span class="r6">                       </span>   
   ... │       │       │     │       │      │              │       │                                                              
   144 │       │       │     │       │   -2 │▁▁▁▁          │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">sind</span><span class="r3">(angle):</span><span class="r6">                                           </span>   
   ... │       │       │     │       │      │              │       │                                                              
   154 │    1% │       │  0% │       │   62 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sin(np</span><span class="r7">.</span><span class="r3">radians(angle))</span><span class="r6">                       </span>   
   ... │       │       │     │       │      │              │       │                                                              
   167 │       │       │     │       │    6 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">tan(np</span><span class="r7">.</span><span class="r3">radians(angle))</span><span class="r6">                       </span>   
   ... │       │       │     │       │      │              │       │                                                              
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">          /Users/rhammond/Documents/GitHub/floris/floris/simulation/flow_field.py: % of time =   2.96% out of 401.61s.           </span>
       ╷       ╷       ╷    ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%   </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/Users/rhammond/Documents/GitHub/floris/floris/simulation/f… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │    │       │      │              │       │                                                              
    71 │       │       │    │       │    1 │▁             │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">_update_grid</span><span class="r3">(</span><span class="r9">self</span><span class="r3">, x_grid_i, y_grid_i, wind_direct…</span>   
    72 │       │       │    │       │    5 │▁▁▁▁▁▁▁       │       │<span class="r3">        xoffset </span><span class="r7">=</span><span class="r3"> x_grid_i </span><span class="r7">-</span><span class="r3"> x1</span><span class="r6">                            </span>   
    73 │       │       │    │       │    1 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        yoffset </span><span class="r7">=</span><span class="r3"> y_grid_i</span><span class="r7">.</span><span class="r3">T </span><span class="r7">-</span><span class="r3"> x2</span><span class="r6">                          </span>   
    74 │       │       │    │       │    0 │▁▁            │       │<span class="r3">        wind_cos </span><span class="r7">=</span><span class="r3"> cosd(</span><span class="r7">-</span><span class="r3">wind_direction_i)</span><span class="r6">                 </span>   
   ... │       │       │    │       │      │              │       │                                                              
    77 │       │       │    │       │   -7 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        x_grid_i </span><span class="r7">=</span><span class="r3"> xoffset </span><span class="r7">*</span><span class="r3"> wind_cos </span><span class="r7">-</span><span class="r3"> yoffset </span><span class="r7">*</span><span class="r3"> wind_sin…</span>   
    78 │       │       │    │       │    8 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        y_grid_i </span><span class="r7">=</span><span class="r3"> yoffset </span><span class="r7">*</span><span class="r3"> wind_cos </span><span class="r7">+</span><span class="r3"> xoffset </span><span class="r7">*</span><span class="r3"> wind_sin…</span>   
   ... │       │       │    │       │      │              │       │                                                              
    85 │       │       │    │   63% │    1 │▁▁▁           │       │<span class="r3">        xt </span><span class="r7">=</span><span class="r3"> [coord</span><span class="r7">.</span><span class="r3">x1 </span><span class="r4">for</span><span class="r3"> coord </span><span class="r12">in</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">turbine_map</span><span class="r7">.</span><span class="r3">coord…</span>   
   ... │       │       │    │       │      │              │       │                                                              
    87 │       │       │    │       │    8 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        x_grid </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">zeros((</span><span class="r9">len</span><span class="r3">(xt), ngrid, ngrid))</span><span class="r6">         </span>   
    88 │       │       │    │       │    5 │▁▁▁▁▁         │       │<span class="r3">        y_grid </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">zeros((</span><span class="r9">len</span><span class="r3">(xt), ngrid, ngrid))</span><span class="r6">         </span>   
    89 │       │       │    │       │    6 │▁▁▁▁▁▁        │       │<span class="r3">        z_grid </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">zeros((</span><span class="r9">len</span><span class="r3">(xt), ngrid, ngrid))</span><span class="r6">         </span>   
   ... │       │       │    │       │      │              │       │                                                              
    97 │       │       │    │       │    1 │▁▁▁▁▁▁▁       │       │<span class="r3">                ngrid </span><span class="r7">*</span><span class="r3"> ngrid</span><span class="r6">                              </span>   
   ... │       │       │    │       │      │              │       │                                                              
   102 │       │       │    │       │    2 │▁▁▁▁          │       │<span class="r3">            xt </span><span class="r7">=</span><span class="r3"> [coord</span><span class="r7">.</span><span class="r3">x1 </span><span class="r4">for</span><span class="r3"> coord </span><span class="r12">in</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">turbine_map</span><span class="r7">.</span><span class="r3">c…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   106 │       │       │    │       │    0 │▁▁▁▁▁▁        │       │<span class="r3">            x_grid[i] </span><span class="r7">=</span><span class="r3"> xt[i]</span><span class="r6">                              </span>   
   ... │       │       │    │       │      │              │       │                                                              
   108 │       │       │    │       │    2 │▁▁            │       │<span class="r3">            z_grid[i] </span><span class="r7">=</span><span class="r3"> zt</span><span class="r6">                                 </span>   
   ... │       │       │    │       │      │              │       │                                                              
   111 │       │       │    │       │   -9 │▁▁▁▁▁         │       │<span class="r3">                x_grid[i], y_grid[i], </span><span class="r9">self</span><span class="r7">.</span><span class="r3">wind_map</span><span class="r7">.</span><span class="r3">turbin…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   240 │       │       │    │       │    7 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            </span><span class="r7">*</span><span class="r3"> (</span><span class="r9">self</span><span class="r7">.</span><span class="r3">z </span><span class="r7">/</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">specified_wind_height) </span><span class="r7">**</span><span class="r3"> </span><span class="r9">sel…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   242 │       │       │    │       │    3 │▁▁▁▁▁▁▁       │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">v_initial </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">zeros(np</span><span class="r7">.</span><span class="r3">shape(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">u_initial))</span>   
   243 │       │       │    │       │    3 │▁▁▁▁▁▁▁       │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">w_initial </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">zeros(np</span><span class="r7">.</span><span class="r3">shape(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">u_initial))</span>   
   ... │       │       │    │       │      │              │       │                                                              
   245 │       │       │    │       │    0 │▁▁▁▁▁▁        │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">u </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">u_initial</span><span class="r7">.</span><span class="r3">copy()</span><span class="r6">                     </span>   
   246 │       │       │    │       │    8 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">v </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">v_initial</span><span class="r7">.</span><span class="r3">copy()</span><span class="r6">                     </span>   
   247 │       │       │    │       │   -6 │▁▁▁▁▁▁        │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">w </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">w_initial</span><span class="r7">.</span><span class="r3">copy()</span><span class="r6">                     </span>   
   ... │       │       │    │       │      │              │       │                                                              
   249 │       │       │    │       │    5 │▁▁▁▁▁▁▁       │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">_compute_turbine_velocity_deficit</span><span class="r3">(</span><span class="r6">                 </span>   
   ... │       │       │    │       │      │              │       │                                                              
   299 │       │       │    │       │   11 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">_compute_turbine_wake_deflection</span><span class="r3">(</span><span class="r9">self</span><span class="r3">, x, y, z, tu…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   306 │       │       │    │       │    8 │▁▁▁▁▁▁        │       │<span class="r3">        xoffset </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">x </span><span class="r7">-</span><span class="r3"> center_of_rotation</span><span class="r7">.</span><span class="r3">x1</span><span class="r6">           </span>   
   307 │       │       │    │       │    8 │▁▁▁▁          │       │<span class="r3">        yoffset </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">y </span><span class="r7">-</span><span class="r3"> center_of_rotation</span><span class="r7">.</span><span class="r3">x2</span><span class="r6">           </span>   
   ... │       │       │    │       │      │              │       │                                                              
   309 │       │       │    │       │    0 │▁▁▁▁▁▁▁       │       │<span class="r3">            xoffset </span><span class="r7">*</span><span class="r3"> cosd(angle) </span><span class="r7">-</span><span class="r3"> yoffset </span><span class="r7">*</span><span class="r3"> sind(angle) </span><span class="r7">…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   312 │       │       │    │       │  -21 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            xoffset </span><span class="r7">*</span><span class="r3"> sind(angle) </span><span class="r7">+</span><span class="r3"> yoffset </span><span class="r7">*</span><span class="r3"> cosd(angle) </span><span class="r7">…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   348 │       │       │    │  100% │  -21 │▁▁▁▁▁▁▁       │       │<span class="r3">                </span><span class="r9">self</span><span class="r7">.</span><span class="r3">wind_map</span><span class="r7">.</span><span class="r3">grid_wind_direction, center_…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   357 │       │       │    │       │    6 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        count </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">sum(freestream_velocities </span><span class="r7">-</span><span class="r3"> wake_veloci…</span>   
   358 │       │       │    │       │    1 │▁▁▁▁▁         │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> (turbine</span><span class="r7">.</span><span class="r3">grid_point_count </span><span class="r7">-</span><span class="r3"> count) </span><span class="r7">/</span><span class="r3"> turbin…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   403 │       │       │    │  100% │    0 │▁▁            │       │<span class="r3">            x </span><span class="r7">=</span><span class="r3"> [coord</span><span class="r7">.</span><span class="r3">x1 </span><span class="r4">for</span><span class="r3"> coord </span><span class="r12">in</span><span class="r3"> coords]</span><span class="r6">             </span>   
   404 │       │       │    │       │    3 │▁▁▁▁▁         │       │<span class="r3">            y </span><span class="r7">=</span><span class="r3"> [coord</span><span class="r7">.</span><span class="r3">x2 </span><span class="r4">for</span><span class="r3"> coord </span><span class="r12">in</span><span class="r3"> coords]</span><span class="r6">             </span>   
   ... │       │       │    │       │      │              │       │                                                              
   413 │       │       │    │   57% │   -8 │▁▁▁▁▁▁▁▁      │       │<span class="r3">                </span><span class="r7">/</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">pi</span><span class="r6">                                    </span>   
   ... │       │       │    │       │      │              │       │                                                              
   511 │       │       │    │       │    0 │▁▁▁▁          │       │<span class="r3">            [turbine</span><span class="r7">.</span><span class="r3">rotor_diameter </span><span class="r4">for</span><span class="r3"> turbine </span><span class="r12">in</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">tu…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   531 │       │       │    │       │    1 │▁▁▁▁▁         │       │<span class="r3">    </span><span class="r4">def</span><span class="r3"> </span><span class="r5">calculate_wake</span><span class="r3">(</span><span class="r9">self</span><span class="r3">, no_wake</span><span class="r7">=</span><span class="r4">False</span><span class="r3">, points</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, t…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   587 │       │       │    │       │   11 │▁▁▁▁▁         │       │<span class="r3">        u_wake </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">zeros(np</span><span class="r7">.</span><span class="r3">shape(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">u))</span><span class="r6">                </span>   
   ... │       │       │    │       │      │              │       │                                                              
   591 │       │       │    │       │  -10 │▁▁▁▁▁▁        │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">v </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">zeros(np</span><span class="r7">.</span><span class="r3">shape(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">u))</span><span class="r6">                </span>   
   592 │       │       │    │       │    3 │▁▁▁▁▁▁▁       │       │<span class="r3">        </span><span class="r9">self</span><span class="r7">.</span><span class="r3">w </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">zeros(np</span><span class="r7">.</span><span class="r3">shape(</span><span class="r9">self</span><span class="r7">.</span><span class="r3">u))</span><span class="r6">                </span>   
   ... │       │       │    │       │      │              │       │                                                              
   594 │       │       │    │   51% │   -4 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        rx </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">array([coord</span><span class="r7">.</span><span class="r3">x1prime </span><span class="r4">for</span><span class="r3"> coord </span><span class="r12">in</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">tur…</span>   
   595 │       │       │    │   64% │    0 │▁▁▁▁▁▁▁       │       │<span class="r3">        ry </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">array([coord</span><span class="r7">.</span><span class="r3">x2prime </span><span class="r4">for</span><span class="r3"> coord </span><span class="r12">in</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">tur…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   597 │       │       │    │       │    1 │▁▁▁           │       │<span class="r3">        </span><span class="r4">for</span><span class="r3"> coord, turbine </span><span class="r12">in</span><span class="r3"> sorted_map:</span><span class="r6">                  </span>   
   598 │       │       │    │       │    9 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">            xloc, yloc </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">array(rx </span><span class="r7">==</span><span class="r3"> coord</span><span class="r7">.</span><span class="r3">x1), np</span><span class="r7">.</span><span class="r3">arra…</span>   
   599 │       │       │    │       │   -6 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            idx </span><span class="r7">=</span><span class="r3"> </span><span class="r9">int</span><span class="r3">(np</span><span class="r7">.</span><span class="r3">where(np</span><span class="r7">.</span><span class="r3">logical_and(yloc, xloc))…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   631 │       │       │    │       │    0 │▁▁            │       │<span class="r3">            deflection </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">_compute_turbine_wake_deflec…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   653 │       │       │    │       │    0 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">                </span><span class="r4">for</span><span class="r3"> coord_ti, turbine_ti </span><span class="r12">in</span><span class="r3"> sorted_map:</span><span class="r6">    </span>   
   ... │       │       │    │       │      │              │       │                                                              
   655 │       │       │    │       │   42 │▁▁▁▁▁▁        │       │<span class="r3">                        np</span><span class="r7">.</span><span class="r3">array(rx </span><span class="r7">==</span><span class="r3"> coord_ti</span><span class="r7">.</span><span class="r3">x1),</span><span class="r6">       </span>   
   656 │       │       │    │       │   20 │▁▁▁▁▁▁▁▁      │       │<span class="r3">                        np</span><span class="r7">.</span><span class="r3">array(ry </span><span class="r7">==</span><span class="r3"> coord_ti</span><span class="r7">.</span><span class="r3">x2),</span><span class="r6">       </span>   
   ... │       │       │    │       │      │              │       │                                                              
   658 │       │       │    │       │  -55 │▁▁▁▁▁         │       │<span class="r3">                    idx </span><span class="r7">=</span><span class="r3"> </span><span class="r9">int</span><span class="r3">(np</span><span class="r7">.</span><span class="r3">where(np</span><span class="r7">.</span><span class="r3">logical_and(yloc…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   666 │       │       │    │       │  -19 │▁▁▁▁▁▁▁       │       │<span class="r3">                        </span><span class="r12">and</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">abs(coord</span><span class="r7">.</span><span class="r3">x2 </span><span class="r7">-</span><span class="r3"> coord_ti</span><span class="r7">.</span><span class="r3">x2)…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   679 │       │       │    │       │  -17 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">                            additional_wind_speed</span><span class="r7">=</span><span class="r9">self</span><span class="r7">.</span><span class="r3">u_i…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   700 │       │       │    │  100% │    1 │▁             │       │<span class="r3">                            ti_added </span><span class="r7">=</span><span class="r3"> area_overlap </span><span class="r7">*</span><span class="r3"> ti_c…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   706 │       │       │    │       │    1 │▁             │       │<span class="r3">                                        ti_added </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">      </span>   
   ... │       │       │    │       │      │              │       │                                                              
   710 │       │       │    │       │    0 │▁▁▁▁          │       │<span class="r3">                                        </span><span class="r7">**</span><span class="r3"> </span><span class="r7">2</span><span class="r6">               </span>   
   ... │       │       │    │       │      │              │       │                                                              
   724 │       │       │    │       │  -57 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">                </span><span class="r4">if</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">wake</span><span class="r7">.</span><span class="r3">velocity_model</span><span class="r7">.</span><span class="r3">model_string </span><span class="r7">=…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   728 │       │       │    │       │   52 │▁▁▁▁▁▁        │       │<span class="r3">                    </span><span class="r9">self</span><span class="r7">.</span><span class="r3">v </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">v </span><span class="r7">+</span><span class="r3"> turb_v_wake</span><span class="r6">          </span>   
   729 │       │       │    │       │    4 │▁▁▁▁▁▁        │       │<span class="r3">                    </span><span class="r9">self</span><span class="r7">.</span><span class="r3">w </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">w </span><span class="r7">+</span><span class="r3"> turb_w_wake</span><span class="r6">          </span>   
   ... │       │       │    │       │      │              │       │                                                              
   733 │       │       │    │       │   -2 │▁▁▁▁▁▁        │       │<span class="r3">            </span><span class="r9">self</span><span class="r7">.</span><span class="r3">u </span><span class="r7">=</span><span class="r3"> </span><span class="r9">self</span><span class="r7">.</span><span class="r3">u_initial </span><span class="r7">-</span><span class="r3"> u_wake</span><span class="r6">               </span>   
   ... │       │       │    │       │      │              │       │                                                              
       ╵       ╵       ╵    ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">   /opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/numpy/lib/function_base.py: % of time =   2.61% out of 401.61s.    </span>
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
   803 │       │       │     │   57% │    6 │▁▁▁▁▁▁        │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_gradient_dispatcher)</span><span class="r6">             </span>   
   ... │       │       │     │       │      │              │       │                                                              
   997 │       │       │     │       │    9 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        dx </span><span class="r7">=</span><span class="r3"> </span><span class="r9">list</span><span class="r3">(varargs)</span><span class="r6">                                 </span>   
   998 │       │       │     │       │    7 │▁▁▁▁▁▁▁       │       │<span class="r3">        </span><span class="r4">for</span><span class="r3"> i, distances </span><span class="r12">in</span><span class="r3"> </span><span class="r9">enumerate</span><span class="r3">(dx):</span><span class="r6">                 </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1009 │       │       │     │       │  -18 │▁▁▁▁▁▁▁▁      │       │<span class="r3">            </span><span class="r4">if</span><span class="r3"> (diffx </span><span class="r7">==</span><span class="r3"> diffx[</span><span class="r7">0</span><span class="r3">])</span><span class="r7">.</span><span class="r3">all():</span><span class="r6">                  </span>   
  1010 │       │       │     │       │    3 │▁▁▁▁▁         │       │<span class="r3">                diffx </span><span class="r7">=</span><span class="r3"> diffx[</span><span class="r7">0</span><span class="r3">]</span><span class="r6">                           </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1028 │       │       │     │       │    3 │▁▁▁▁▁▁▁       │       │<span class="r3">    slice1 </span><span class="r7">=</span><span class="r3"> [</span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)]</span><span class="r7">*</span><span class="r3">N</span><span class="r6">                               </span>   
  1029 │       │       │     │       │    7 │▁▁▁▁▁▁▁       │       │<span class="r3">    slice2 </span><span class="r7">=</span><span class="r3"> [</span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)]</span><span class="r7">*</span><span class="r3">N</span><span class="r6">                               </span>   
  1030 │       │       │     │       │    7 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">    slice3 </span><span class="r7">=</span><span class="r3"> [</span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)]</span><span class="r7">*</span><span class="r3">N</span><span class="r6">                               </span>   
  1031 │       │       │     │       │    2 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    slice4 </span><span class="r7">=</span><span class="r3"> [</span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)]</span><span class="r7">*</span><span class="r3">N</span><span class="r6">                               </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1047 │       │       │     │       │ -126 │▁▁▁▁          │       │<span class="r3">    </span><span class="r4">for</span><span class="r3"> axis, ax_dx </span><span class="r12">in</span><span class="r3"> </span><span class="r9">zip</span><span class="r3">(axes, dx):</span><span class="r6">                      </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1053 │       │       │     │       │  150 │▁▁▁▁          │       │<span class="r3">        out </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">empty_like(f, dtype</span><span class="r7">=</span><span class="r3">otype)</span><span class="r6">                </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1056 │       │       │     │  100% │    1 │▁             │       │<span class="r3">        uniform_spacing </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">ndim(ax_dx) </span><span class="r7">==</span><span class="r3"> </span><span class="r7">0</span><span class="r6">              </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1059 │       │       │     │       │ -176 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        slice1[axis] </span><span class="r7">=</span><span class="r3"> </span><span class="r9">slice</span><span class="r3">(</span><span class="r7">1</span><span class="r3">, </span><span class="r7">-1</span><span class="r3">)</span><span class="r6">                        </span>   
  1060 │       │       │     │       │ -130 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        slice2[axis] </span><span class="r7">=</span><span class="r3"> </span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">, </span><span class="r7">-2</span><span class="r3">)</span><span class="r6">                     </span>   
  1061 │       │       │     │       │ -139 │▁▁▁▁▁▁▁       │       │<span class="r3">        slice3[axis] </span><span class="r7">=</span><span class="r3"> </span><span class="r9">slice</span><span class="r3">(</span><span class="r7">1</span><span class="r3">, </span><span class="r7">-1</span><span class="r3">)</span><span class="r6">                        </span>   
  1062 │       │       │     │       │ -135 │▁▁▁▁▁▁▁       │       │<span class="r3">        slice4[axis] </span><span class="r7">=</span><span class="r3"> </span><span class="r9">slice</span><span class="r3">(</span><span class="r7">2</span><span class="r3">, </span><span class="r4">None</span><span class="r3">)</span><span class="r6">                      </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1065 │    1% │       │  0% │       │  -39 │▁▁▁▁▁▁▁▁▁     │     1 │<span class="r3">            out[</span><span class="r9">tuple</span><span class="r3">(slice1)] </span><span class="r7">=</span><span class="r3"> (f[</span><span class="r9">tuple</span><span class="r3">(slice4)] </span><span class="r7">-</span><span class="r3"> f[</span><span class="r9">tup…</span>   
   ... │       │       │     │       │      │              │       │                                                              
  1080 │       │       │     │       │    2 │▁▁▁▁▁▁        │       │<span class="r3">        </span><span class="r4">if</span><span class="r3"> edge_order </span><span class="r7">==</span><span class="r3"> </span><span class="r7">1</span><span class="r3">:</span><span class="r6">                                </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1086 │       │       │     │       │    9 │▁▁▁▁▁         │       │<span class="r3">            out[</span><span class="r9">tuple</span><span class="r3">(slice1)] </span><span class="r7">=</span><span class="r3"> (f[</span><span class="r9">tuple</span><span class="r3">(slice2)] </span><span class="r7">-</span><span class="r3"> f[</span><span class="r9">tup…</span>   
   ... │       │       │     │       │      │              │       │                                                              
  1093 │       │       │     │       │  -22 │▁▁▁▁          │       │<span class="r3">            out[</span><span class="r9">tuple</span><span class="r3">(slice1)] </span><span class="r7">=</span><span class="r3"> (f[</span><span class="r9">tuple</span><span class="r3">(slice2)] </span><span class="r7">-</span><span class="r3"> f[</span><span class="r9">tup…</span>   
   ... │       │       │     │       │      │              │       │                                                              
  1131 │       │       │     │       │    1 │▁▁▁▁▁         │       │<span class="r3">        outvals</span><span class="r7">.</span><span class="r3">append(out)</span><span class="r6">                                </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1135 │       │       │     │       │    5 │▁▁▁▁▁         │       │<span class="r3">        slice2[axis] </span><span class="r7">=</span><span class="r3"> </span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)</span><span class="r6">                         </span>   
  1136 │       │       │     │       │    8 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        slice3[axis] </span><span class="r7">=</span><span class="r3"> </span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)</span><span class="r6">                         </span>   
  1137 │       │       │     │   58% │ -131 │▁▁▁▁▁▁▁       │       │<span class="r3">        slice4[axis] </span><span class="r7">=</span><span class="r3"> </span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)</span><span class="r6">                         </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1149 │       │       │     │       │    1 │▁             │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_diff_dispatcher)</span><span class="r6">                 </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1251 │       │       │     │       │    3 │▁▁▁           │       │<span class="r3">    combined</span><span class="r7">.</span><span class="r3">append(a)</span><span class="r6">                                     </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1264 │       │       │     │       │    2 │▁▁            │       │<span class="r3">    slice1 </span><span class="r7">=</span><span class="r3"> [</span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)] </span><span class="r7">*</span><span class="r3"> nd</span><span class="r6">                            </span>   
  1265 │       │       │     │       │    5 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">    slice2 </span><span class="r7">=</span><span class="r3"> [</span><span class="r9">slice</span><span class="r3">(</span><span class="r4">None</span><span class="r3">)] </span><span class="r7">*</span><span class="r3"> nd</span><span class="r6">                            </span>   
  1266 │       │       │     │       │ -116 │▁▁▁▁▁▁        │       │<span class="r3">    slice1[axis] </span><span class="r7">=</span><span class="r3"> </span><span class="r9">slice</span><span class="r3">(</span><span class="r7">1</span><span class="r3">, </span><span class="r4">None</span><span class="r3">)</span><span class="r6">                          </span>   
   ... │       │       │     │       │      │              │       │                                                              
  1272 │       │       │     │       │    2 │▁▁▁▁          │       │<span class="r3">    </span><span class="r4">for</span><span class="r3"> _ </span><span class="r12">in</span><span class="r3"> </span><span class="r9">range</span><span class="r3">(n):</span><span class="r6">                                     </span>   
  1273 │       │       │     │       │   -8 │▁▁▁▁          │       │<span class="r3">        a </span><span class="r7">=</span><span class="r3"> op(a[slice1], a[slice2])</span><span class="r6">                       </span>   
   ... │       │       │     │       │      │              │       │                                                              
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">   /opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/numpy/core/fromnumeric.py: % of time =   1.85% out of 401.61s.    </span>
       ╷       ╷       ╷    ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%   </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │    │       │      │              │       │                                                              
    54 │       │       │    │       │   -2 │▁▁▁▁          │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">_wrapfunc</span><span class="r3">(obj, method, </span><span class="r7">*</span><span class="r3">args, </span><span class="r7">**</span><span class="r3">kwds):</span><span class="r6">                 </span>   
   ... │       │       │    │       │      │              │       │                                                              
    56 │       │       │    │       │   27 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> </span><span class="r9">getattr</span><span class="r3">(obj, method)(</span><span class="r7">*</span><span class="r3">args, </span><span class="r7">**</span><span class="r3">kwds)</span><span class="r6">         </span>   
   ... │       │       │    │       │      │              │       │                                                              
    69 │       │       │    │       │    0 │▁▁▁           │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">_wrapreduction</span><span class="r3">(obj, ufunc, method, axis, dtype, out, </span><span class="r7">*…</span>   
    70 │       │       │    │       │ -234 │▁▁▁▁▁▁        │       │<span class="r3">    passkwargs </span><span class="r7">=</span><span class="r3"> {k: v </span><span class="r4">for</span><span class="r3"> k, v </span><span class="r12">in</span><span class="r3"> kwargs</span><span class="r7">.</span><span class="r3">items()</span><span class="r6">          </span>   
   ... │       │       │    │       │      │              │       │                                                              
    75 │       │       │    │       │    2 │▁▁▁▁          │       │<span class="r3">            reduction </span><span class="r7">=</span><span class="r3"> </span><span class="r9">getattr</span><span class="r3">(obj, method)</span><span class="r6">               </span>   
    76 │       │       │    │   51% │    2 │▁▁            │       │<span class="r3">        </span><span class="r4">except</span><span class="r3"> </span><span class="r14">AttributeError</span><span class="r3">:</span><span class="r6">                             </span>   
   ... │       │       │    │       │      │              │       │                                                              
    84 │       │       │    │       │  -10 │▁▁▁▁▁▁        │       │<span class="r3">                </span><span class="r4">return</span><span class="r3"> reduction(axis</span><span class="r7">=</span><span class="r3">axis, out</span><span class="r7">=</span><span class="r3">out, </span><span class="r7">**</span><span class="r3">pas…</span>   
   ... │       │       │    │       │      │              │       │                                                              
    86 │       │       │    │       │  -14 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> ufunc</span><span class="r7">.</span><span class="r3">reduce(obj, axis, dtype, out, </span><span class="r7">**</span><span class="r3">passkwarg…</span>   
   ... │       │       │    │       │      │              │       │                                                              
  1179 │       │       │    │       │    1 │▁             │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_searchsorted_dispatcher)</span><span class="r6">         </span>   
   ... │       │       │    │       │      │              │       │                                                              
  1246 │       │       │    │  100% │   -4 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> _wrapfunc(a, </span><span class="r13">'searchsorted'</span><span class="r3">, v, side</span><span class="r7">=</span><span class="r3">side, sort…</span>   
   ... │       │       │    │       │      │              │       │                                                              
  1966 │       │       │    │       │    1 │▁             │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_sum_dispatcher)</span><span class="r6">                  </span>   
   ... │       │       │    │       │      │              │       │                                                              
  2083 │       │       │    │       │    1 │▁             │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_any_dispatcher)</span><span class="r6">                  </span>   
   ... │       │       │    │       │      │              │       │                                                              
  2397 │       │       │    │   82% │    1 │▁             │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_amax_dispatcher)</span><span class="r6">                 </span>   
   ... │       │       │    │       │      │              │       │                                                              
  2618 │       │       │    │       │    1 │▁             │       │<span class="r3">                          initial</span><span class="r7">=</span><span class="r3">initial)</span><span class="r6">                 </span>   
   ... │       │       │    │       │      │              │       │                                                              
  3014 │       │       │    │   60% │    1 │▁▁▁▁▁▁▁       │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_mean_dispatcher)</span><span class="r6">                 </span>   
   ... │       │       │    │       │      │              │       │                                                              
  3111 │       │       │    │       │    3 │▁▁▁▁▁         │       │<span class="r3">            mean </span><span class="r7">=</span><span class="r3"> a</span><span class="r7">.</span><span class="r3">mean</span><span class="r6">                                  </span>   
   ... │       │       │    │       │      │              │       │                                                              
  3118 │       │       │    │       │  -60 │▁▁▁▁          │       │<span class="r3">                          out</span><span class="r7">=</span><span class="r3">out, </span><span class="r7">**</span><span class="r3">kwargs)</span><span class="r6">               </span>   
   ... │       │       │    │       │      │              │       │                                                              
       ╵       ╵       ╵    ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">  /opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/numpy/core/function_base.py: % of time =   1.47% out of 401.61s.   </span>
       ╷       ╷       ╷    ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%   </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │    │       │      │              │       │                                                              
    37 │       │       │    │       │    1 │▁             │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_linspace_dispatcher)</span><span class="r6">             </span>   
   ... │       │       │    │       │      │              │       │                                                              
   131 │       │       │    │       │    0 │▁▁            │       │<span class="r3">    div </span><span class="r7">=</span><span class="r3"> (num </span><span class="r7">-</span><span class="r3"> </span><span class="r7">1</span><span class="r3">) </span><span class="r4">if</span><span class="r3"> endpoint </span><span class="r4">else</span><span class="r3"> num</span><span class="r6">                   </span>   
   ... │       │       │    │       │      │              │       │                                                              
   135 │       │       │    │       │  -19 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">    start </span><span class="r7">=</span><span class="r3"> asanyarray(start) </span><span class="r7">*</span><span class="r3"> </span><span class="r7">1.0</span><span class="r6">                        </span>   
   136 │       │       │    │       │  -25 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">    stop  </span><span class="r7">=</span><span class="r3"> asanyarray(stop)  </span><span class="r7">*</span><span class="r3"> </span><span class="r7">1.0</span><span class="r6">                        </span>   
   ... │       │       │    │       │      │              │       │                                                              
   138 │       │       │    │       │  -10 │▁▁▁▁▁▁        │       │<span class="r3">    dt </span><span class="r7">=</span><span class="r3"> result_type(start, stop, </span><span class="r9">float</span><span class="r3">(num))</span><span class="r6">              </span>   
   ... │       │       │    │       │      │              │       │                                                              
   142 │       │       │    │   68% │    0 │▁▁▁▁          │       │<span class="r3">    delta </span><span class="r7">=</span><span class="r3"> stop </span><span class="r7">-</span><span class="r3"> start</span><span class="r6">                                   </span>   
   143 │       │       │    │       │   16 │▁▁▁▁          │       │<span class="r3">    y </span><span class="r7">=</span><span class="r3"> _nx</span><span class="r7">.</span><span class="r3">arange(</span><span class="r7">0</span><span class="r3">, num, dtype</span><span class="r7">=</span><span class="r3">dt)</span><span class="r7">.</span><span class="r3">reshape((</span><span class="r7">-1</span><span class="r3">,) </span><span class="r7">+</span><span class="r3"> (</span><span class="r7">1</span><span class="r3">,) </span><span class="r7">…</span>   
   ... │       │       │    │       │      │              │       │                                                              
   149 │       │       │    │       │   10 │▁▁▁▁          │       │<span class="r3">        step </span><span class="r7">=</span><span class="r3"> delta </span><span class="r7">/</span><span class="r3"> div</span><span class="r6">                                 </span>   
   150 │       │       │    │       │    4 │▁▁▁▁          │       │<span class="r3">        </span><span class="r4">if</span><span class="r3"> _nx</span><span class="r7">.</span><span class="r3">any(step </span><span class="r7">==</span><span class="r3"> </span><span class="r7">0</span><span class="r3">):</span><span class="r6">                             </span>   
   ... │       │       │    │       │      │              │       │                                                              
   159 │       │       │    │       │    0 │▁▁▁▁          │       │<span class="r3">                y </span><span class="r7">*=</span><span class="r3"> step</span><span class="r6">                                  </span>   
   ... │       │       │    │       │      │              │       │                                                              
   168 │       │       │    │       │  -18 │▁▁▁▁▁▁        │       │<span class="r3">    y </span><span class="r7">+=</span><span class="r3"> start</span><span class="r6">                                             </span>   
   ... │       │       │    │       │      │              │       │                                                              
   170 │       │       │    │   70% │    0 │▁▁▁           │       │<span class="r3">    </span><span class="r4">if</span><span class="r3"> endpoint </span><span class="r12">and</span><span class="r3"> num </span><span class="r7">&gt;</span><span class="r3"> </span><span class="r7">1</span><span class="r3">:</span><span class="r6">                               </span>   
   ... │       │       │    │       │      │              │       │                                                              
   179 │       │       │    │       │    1 │▁▁▁▁▁▁▁       │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> y</span><span class="r7">.</span><span class="r3">astype(dtype, copy</span><span class="r7">=</span><span class="r4">False</span><span class="r3">)</span><span class="r6">                 </span>   
   ... │       │       │    │       │      │              │       │                                                              
       ╵       ╵       ╵    ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">     /opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/numpy/core/numeric.py: % of time =   0.83% out of 401.61s.      </span>
       ╷       ╷       ╷    ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%   </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │    │       │      │              │       │                                                              
   334 │       │       │    │       │    0 │▁▁▁           │       │<span class="r3">        dtype </span><span class="r7">=</span><span class="r3"> array(fill_value)</span><span class="r7">.</span><span class="r3">dtype</span><span class="r6">                    </span>   
   335 │       │       │    │       │   14 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    a </span><span class="r7">=</span><span class="r3"> empty(shape, dtype, order)</span><span class="r6">                         </span>   
   336 │       │       │    │   69% │    1 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">    multiarray</span><span class="r7">.</span><span class="r3">copyto(a, fill_value, casting</span><span class="r7">=</span><span class="r13">'unsafe'</span><span class="r3">)</span><span class="r6">     </span>   
   ... │       │       │    │       │      │              │       │                                                              
   469 │       │       │    │       │    2 │▁▁            │       │<span class="r10">@set_module</span><span class="r3">(</span><span class="r13">'numpy'</span><span class="r3">)</span><span class="r6">                                       </span>   
   ... │       │       │    │       │      │              │       │                                                              
   538 │       │       │    │       │   34 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> array(a, dtype, copy</span><span class="r7">=</span><span class="r4">False</span><span class="r3">, order</span><span class="r7">=</span><span class="r3">order)</span><span class="r6">        </span>   
   ... │       │       │    │       │      │              │       │                                                              
   541 │       │       │    │       │    1 │▁             │       │<span class="r10">@set_module</span><span class="r3">(</span><span class="r13">'numpy'</span><span class="r3">)</span><span class="r6">                                       </span>   
   ... │       │       │    │       │      │              │       │                                                              
   591 │       │       │    │       │   10 │▁▁▁▁▁▁        │       │<span class="r3">    </span><span class="r4">return</span><span class="r3"> array(a, dtype, copy</span><span class="r7">=</span><span class="r4">False</span><span class="r3">, order</span><span class="r7">=</span><span class="r3">order, subok</span><span class="r7">=</span><span class="r4">…</span>   
   ... │       │       │    │       │      │              │       │                                                              
  1557 │       │       │    │       │  -15 │▁▁▁▁▁         │       │<span class="r4">def</span><span class="r3"> </span><span class="r5">normalize_axis_tuple</span><span class="r3">(axis, ndim, argname</span><span class="r7">=</span><span class="r4">None</span><span class="r3">, allow_d…</span>   
   ... │       │       │    │       │      │              │       │                                                              
  1603 │       │       │    │       │    3 │▁▁▁           │       │<span class="r3">            axis </span><span class="r7">=</span><span class="r3"> [operator</span><span class="r7">.</span><span class="r3">index(axis)]</span><span class="r6">                  </span>   
   ... │       │       │    │       │      │              │       │                                                              
  1607 │       │       │    │       │ -278 │▁▁▁▁▁▁▁▁      │       │<span class="r3">    axis </span><span class="r7">=</span><span class="r3"> </span><span class="r9">tuple</span><span class="r3">([normalize_axis_index(ax, ndim, argname) </span><span class="r4">…</span>   
  1608 │       │       │    │       │    5 │▁▁▁▁▁         │       │<span class="r3">    </span><span class="r4">if</span><span class="r3"> </span><span class="r12">not</span><span class="r3"> allow_duplicate </span><span class="r12">and</span><span class="r3"> </span><span class="r9">len</span><span class="r3">(</span><span class="r9">set</span><span class="r3">(axis)) </span><span class="r7">!=</span><span class="r3"> </span><span class="r9">len</span><span class="r3">(axis):</span>   
   ... │       │       │    │       │      │              │       │                                                              
  2799 │       │       │    │   60% │    1 │▁             │       │<span class="r3">    val </span><span class="r7">=</span><span class="r3"> (maskvalue </span><span class="r7">&gt;&gt;</span><span class="r3"> SHIFT_DIVIDEBYZERO) </span><span class="r7">&amp;</span><span class="r3"> mask</span><span class="r6">         </span>   
   ... │       │       │    │       │      │              │       │                                                              
  2801 │       │       │    │       │    0 │▁▁            │       │<span class="r3">    val </span><span class="r7">=</span><span class="r3"> (maskvalue </span><span class="r7">&gt;&gt;</span><span class="r3"> SHIFT_OVERFLOW) </span><span class="r7">&amp;</span><span class="r3"> mask</span><span class="r6">             </span>   
   ... │       │       │    │       │      │              │       │                                                              
  2805 │       │       │    │       │    2 │▁▁            │       │<span class="r3">    val </span><span class="r7">=</span><span class="r3"> (maskvalue </span><span class="r7">&gt;&gt;</span><span class="r3"> SHIFT_INVALID) </span><span class="r7">&amp;</span><span class="r3"> mask</span><span class="r6">              </span>   
   ... │       │       │    │       │      │              │       │                                                              
       ╵       ╵       ╵    ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">    /opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/numpy/core/einsumfunc.py: % of time =   0.80% out of 401.61s.     </span>
       ╷       ╷       ╷     ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys  </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%    </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │     │       │      │              │       │                                                              
  1002 │       │       │     │       │  -34 │▁▁▁▁          │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_einsum_dispatcher, module</span><span class="r7">=</span><span class="r13">'numpy…</span>   
   ... │       │       │     │       │      │              │       │                                                              
  1346 │    1% │       │  0% │       │ 1556 │▁▁▁▁▁▁        │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> c_einsum(</span><span class="r7">*</span><span class="r3">operands, </span><span class="r7">**</span><span class="r3">kwargs)</span><span class="r6">               </span>   
   ... │       │       │     │       │      │              │       │                                                              
       ╵       ╵       ╵     ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">   /opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/numpy/core/numerictypes.py: % of time =   0.55% out of 401.61s.   </span>
       ╷       ╷       ╷    ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%   </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │    │       │      │              │       │                                                              
   328 │       │       │    │       │ -266 │▁▁▁▁▁▁▁▁      │       │<span class="r3">        </span><span class="r4">return</span><span class="r3"> </span><span class="r9">issubclass</span><span class="r3">(arg1, arg2)</span><span class="r6">                      </span>   
   329 │       │       │    │   74% │   -3 │▁▁▁▁▁▁▁       │       │<span class="r3">    </span><span class="r4">except</span><span class="r3"> </span><span class="r14">TypeError</span><span class="r3">:</span><span class="r6">                                      </span>   
   ... │       │       │    │       │      │              │       │                                                              
       ╵       ╵       ╵    ╵       ╵      ╵              ╵       ╵                                                              
<span class="r11">    /opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages/numpy/lib/arraysetops.py: % of time =   0.45% out of 401.61s.    </span>
       ╷       ╷       ╷    ╷       ╷      ╷              ╷       ╷                                                              
 <span class="r2"> Line </span>│<span class="r2">Time % </span>│<span class="r2">Time % </span>│<span class="r2">Sys </span>│<span class="r2">Mem %  </span>│<span class="r2">Net   </span>│<span class="r2">Memory usage  </span>│<span class="r2">Copy   </span>│<span class="r2">                                                             </span> 
       │<span class="r2">Python </span>│<span class="r2">native </span>│<span class="r2">%   </span>│<span class="r2">Python </span>│<span class="r2">(MB)  </span>│<span class="r2">over time / % </span>│<span class="r2">(MB/s) </span>│<span class="r2">/opt/miniconda3/envs/floris-fly/lib/python3.7/site-packages… </span> 
╺━━━━━━┿━━━━━━━┿━━━━━━━┿━━━━┿━━━━━━━┿━━━━━━┿━━━━━━━━━━━━━━┿━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
   ... │       │       │    │       │      │              │       │                                                              
   151 │       │       │    │       │  -14 │▁▁▁▁▁▁▁▁      │       │<span class="r10">@array_function_dispatch</span><span class="r3">(_unique_dispatcher)</span><span class="r6">               </span>   
   ... │       │       │    │       │      │              │       │                                                              
   304 │       │       │    │       │   73 │▁▁▁▁▁▁▁       │       │<span class="r3">    ar </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">asanyarray(ar)</span><span class="r7">.</span><span class="r3">flatten()</span><span class="r6">                       </span>   
   ... │       │       │    │       │      │              │       │                                                              
   312 │       │       │    │       │  -13 │▁▁▁▁▁▁▁▁▁     │       │<span class="r3">        ar</span><span class="r7">.</span><span class="r3">sort()</span><span class="r6">                                          </span>   
   ... │       │       │    │       │      │              │       │                                                              
   314 │       │       │    │       │    4 │▁▁▁▁          │       │<span class="r3">    mask </span><span class="r7">=</span><span class="r3"> np</span><span class="r7">.</span><span class="r3">empty(aux</span><span class="r7">.</span><span class="r3">shape, dtype</span><span class="r7">=</span><span class="r3">np</span><span class="r7">.</span><span class="r3">bool_)</span><span class="r6">             </span>   
   315 │       │       │    │       │    1 │▁▁▁▁▁         │       │<span class="r3">    mask[:</span><span class="r7">1</span><span class="r3">] </span><span class="r7">=</span><span class="r3"> </span><span class="r4">True</span><span class="r6">                                        </span>   
   316 │       │       │    │       │   -7 │▁▁▁▁▁         │       │<span class="r3">    mask[</span><span class="r7">1</span><span class="r3">:] </span><span class="r7">=</span><span class="r3"> aux[</span><span class="r7">1</span><span class="r3">:] </span><span class="r7">!=</span><span class="r3"> aux[:</span><span class="r7">-1</span><span class="r3">]</span><span class="r6">                         </span>   
   ... │       │       │    │       │      │              │       │                                                              
   318 │       │       │    │       │    0 │▁▁▁▁▁         │       │<span class="r3">    ret </span><span class="r7">=</span><span class="r3"> (aux[mask],)</span><span class="r6">                                     </span>   
   ... │       │       │    │       │      │              │       │                                                              
       ╵       ╵       ╵    ╵       ╵      ╵              ╵       ╵                                                              
generated by the <a href="https://github.com/emeryberger/scalene"><span class="r15">scalene</span></a> profiler                                                                                                   
</pre>
    </code>
</body>
</html>
